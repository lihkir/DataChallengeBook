
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Teorema de Bayes usando Python &#8212; Data Challenge</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Data Challenge: Teorema de Bayes" href="intro.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo_un.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Data Challenge</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Data Challenge: Teorema de Bayes
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Teorema de Bayes usando Python
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/bayes_theorem.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/lihkir/Uninorte"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/lihkir/Uninorte/issues/new?title=Issue%20on%20page%20%2Fbayes_theorem.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/lihkir/Uninorte/master?urlpath=tree/docs/bayes_theorem.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#problemas-de-aplicacion">
   Problemas de Aplicación
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#analisis-de-una-prueba-de-diagnostico-medico">
     Análisis de una prueba de diagnóstico médico
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#calculo-manual">
       Cálculo manual
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#calculo-usando-python">
       Cálculo usando Python
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#clasificador-binario-terminologia">
     Clasificador binario: Terminología
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ventas-en-supermercados">
     Ventas en supermercados
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Teorema de Bayes usando Python</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#problemas-de-aplicacion">
   Problemas de Aplicación
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#analisis-de-una-prueba-de-diagnostico-medico">
     Análisis de una prueba de diagnóstico médico
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#calculo-manual">
       Cálculo manual
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#calculo-usando-python">
       Cálculo usando Python
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#clasificador-binario-terminologia">
     Clasificador binario: Terminología
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ventas-en-supermercados">
     Ventas en supermercados
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="teorema-de-bayes-usando-python">
<h1>Teorema de Bayes usando Python<a class="headerlink" href="#teorema-de-bayes-usando-python" title="Permalink to this headline">¶</a></h1>
<section id="problemas-de-aplicacion">
<h2>Problemas de Aplicación<a class="headerlink" href="#problemas-de-aplicacion" title="Permalink to this headline">¶</a></h2>
<section id="analisis-de-una-prueba-de-diagnostico-medico">
<h3>Análisis de una prueba de diagnóstico médico<a class="headerlink" href="#analisis-de-una-prueba-de-diagnostico-medico" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Un ejemplo muy utilizado de las ventajas del <code class="docutils literal notranslate"><span class="pre">Teorema</span> <span class="pre">de</span> <span class="pre">Bayes</span></code> es el análisis de una prueba de diagnóstico médico.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Escenario</span></code>: Considere una población humana que puede o no tener cáncer (Cáncer es <code class="docutils literal notranslate"><span class="pre">True</span></code> o <code class="docutils literal notranslate"><span class="pre">False</span></code>) y una prueba médica que da un resultado positivo o negativo para detectar el cáncer (La prueba es <code class="docutils literal notranslate"><span class="pre">Positive</span></code> o <code class="docutils literal notranslate"><span class="pre">Negative</span></code>), por ejemplo, como una mamografía para detectar el cáncer de mama.</p></li>
</ul>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">Problema</span></code>: Si un paciente seleccionado al azar se somete a la prueba y ésta da un resultado <code class="docutils literal notranslate"><span class="pre">positivo</span></code>, ¿cuál es la probabilidad de que el paciente tenga cáncer?</p>
</div></blockquote>
<section id="calculo-manual">
<h4>Cálculo manual<a class="headerlink" href="#calculo-manual" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Las pruebas de diagnóstico médico no son perfectas; tienen errores. A veces, un paciente tendrá cáncer, pero la prueba no lo detectará. Esta capacidad de la prueba para detectar el cáncer se denomina <code class="docutils literal notranslate"><span class="pre">sensibilidad</span></code> o <code class="docutils literal notranslate"><span class="pre">tasa</span> <span class="pre">de</span> <span class="pre">verdaderos</span> <span class="pre">positivos</span></code>.</p></li>
<li><p>En este caso, se calcula un valor de sensibilidad para la prueba. La prueba es buena, pero no excelente, con una tasa de verdaderos positivos o <code class="docutils literal notranslate"><span class="pre">sensibilidad</span> <span class="pre">del</span> <span class="pre">85%</span></code>. Es decir, de todas las personas que tienen cáncer y se someten a la prueba, el <code class="docutils literal notranslate"><span class="pre">85%</span> <span class="pre">de</span> <span class="pre">ellas</span> <span class="pre">obtendrán</span> <span class="pre">un</span> <span class="pre">resultado</span> <span class="pre">positivo</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">prueba</span></code>. Entonces</p></li>
</ul>
<div class="math notranslate nohighlight">
\[P(\textsf{Test=Positive} |  \textsf{Cancer=True}) = 0.85\]</div>
<ul class="simple">
<li><p>Dada esta información, nuestra intuición sugeriría que hay un 85% de probabilidad de que el paciente tenga cáncer. <code class="docutils literal notranslate"><span class="pre">Nuestras</span> <span class="pre">intuiciones</span> <span class="pre">sobre</span> <span class="pre">la</span> <span class="pre">probabilidad</span> <span class="pre">son</span> <span class="pre">erróneas.</span></code></p></li>
<li><p>Este tipo de error en la interpretación de las probabilidades es tan común que tiene su propio nombre; se denomina <code class="docutils literal notranslate"><span class="pre">falacia</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">tasa</span> <span class="pre">base</span></code> <a class="reference external" href="https://en.wikipedia.org/wiki/Base_rate_fallacy">base rate fallacy</a>.</p></li>
<li><p>Tiene este nombre porque el error en la estimación de la probabilidad de un suceso se debe a que se ignora la tasa base. Es decir, ignora la probabilidad de que una persona seleccionada al azar tenga cáncer, independientemente de los resultados de una prueba diagnóstica.</p></li>
</ul>
<ul class="simple">
<li><p>En este caso, podemos suponer que la probabilidad de cáncer de mama es baja, y utilizar un valor de tasa base artificial de una persona de cada <code class="docutils literal notranslate"><span class="pre">5000,</span> <span class="pre">o</span> <span class="pre">(0.0002)</span> <span class="pre">=</span> <span class="pre">0.02%</span></code>.</p></li>
</ul>
<div class="math notranslate nohighlight">
\[P(\textsf{Cancer=True}) = 0.02%\]</div>
<ul class="simple">
<li><p>Podemos calcular correctamente la probabilidad de que un paciente tenga cáncer dado un resultado positivo de la prueba utilizando el <code class="docutils literal notranslate"><span class="pre">Teorema</span> <span class="pre">de</span> <span class="pre">Bayes</span></code>. Traslademos nuestro escenario al siguiente sistema de ecuaciones</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
P(A|B)&amp;=\frac{P(A)\cdot P(B|A)}{P(B)}\\
P(\textsf{Cancer=True} | \textsf{Test=Positive}) &amp;= \frac{P(\textsf{Cancer=True})\cdot P(\textsf{Test=Positive} | \textsf{Cancer=True})}{P(\textsf{Test=Positive})} 
\end{align*}
\end{split}\]</div>
<ul class="simple">
<li><p>Sabemos que la probabilidad de que la prueba sea positiva dado que el paciente tiene cáncer es del <code class="docutils literal notranslate"><span class="pre">85%</span></code>, y sabemos que la tasa base o la probabilidad previa de que un determinado paciente tenga cáncer es del <code class="docutils literal notranslate"><span class="pre">0.02%</span></code>; podemos introducir estos valores:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
P(\textsf{Cancer=True} | \textsf{Test=Positive}) = \frac{0.85\cdot0.0002}{P(\textsf{Test=Positive})} 
\]</div>
<ul class="simple">
<li><p>Nótese que no conocemos <span class="math notranslate nohighlight">\(P(\textsf{Test=Positivo})\)</span>, no se da directamente. En cambio, podemos estimarlo utilizando:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
P(B) &amp;= P(A)\cdot P(B|A) + P(A^{c})\cdot P(B|A^{c})\\
P(\textsf{Test=Positive}) &amp;= P(\textsf{Cancer=True})\cdot P(\textsf{Test=Positive} | \textsf{Cancer=True})\\
&amp;+ P(\textsf{Cancer=False})\cdot P(\textsf{Test=Positive} | \textsf{Cancer=False}) 
\end{align*}
\end{split}\]</div>
<ul class="simple">
<li><p>En primer lugar, podemos calcular <span class="math notranslate nohighlight">\(P(\textsf{Cáncer=Falso})\)</span> como el complemento de <span class="math notranslate nohighlight">\(P(\textsf{Cáncer=Verdadero})\)</span>, que ya conocemos</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
P(\textsf{Cancer=False}) = 1 – P(\textsf{Cancer=True}) = 1 – 0.0002 = 0.9998
\]</div>
<ul class="simple">
<li><p>Vamos a complementar lo que tenemos. Podemos introducir nuestros valores conocidos de la siguiente manera</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
P(\textsf{Test=Positive}) = 0.85\cdot 0.0002 + P(\textsf{Test=Positive} | \textsf{Cancer=False})\cdot 0.9998
\]</div>
<ul class="simple">
<li><p>Todavía no sabemos la probabilidad de un resultado positivo de la prueba si no hay cáncer. Esto requiere información adicional. En concreto, necesitamos saber que tan buena es la prueba para identificar correctamente a las personas que no tienen cáncer. Es decir, el resultado negativo de la prueba (<span class="math notranslate nohighlight">\(\textsf{Test=Negativo}\)</span>) cuando el paciente no tiene cáncer (<span class="math notranslate nohighlight">\(\textsf{Cáncer=Falso}\)</span>), lo que se llama la tasa de verdaderos negativos o la especificidad. Utilizaremos un valor de <code class="docutils literal notranslate"><span class="pre">especificidad</span> <span class="pre">artificial</span> <span class="pre">del</span> <span class="pre">95%</span></code>.</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
P(\textsf{Test=Negative} | \textsf{Cancer=False}) = 0.95
\]</div>
<ul class="simple">
<li><p>Con este último dato, podemos calcular la tasa de falsos positivos o de falsas alarmas como el complemento de la tasa de verdaderos negativos.</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
P(\textsf{Test=Positive} | \textsf{Cancer=False}) = 1 – P(\textsf{Test=Negative} | \textsf{Cancer=False})= 1 – 0.95 = 0.05
\]</div>
<ul class="simple">
<li><p>Podemos introducir esta tasa de falsas alarmas en nuestro cálculo de <span class="math notranslate nohighlight">\(P(\textsf{Prueba=Positiva})\)</span> de la siguiente manera</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
P(\textsf{Test=Positive}) &amp;= 0.85\cdot0.0002 + 0.05\cdot0.9998\\
&amp;= 0.00017 + 0.04999\\
&amp;= 0.05016\\
\end{align*}
\end{split}\]</div>
<ul class="simple">
<li><p>Por lo que la probabilidad de que la prueba dé un resultado positivo, independientemente de si la persona tiene cáncer o no, es de aproximadamente el <code class="docutils literal notranslate"><span class="pre">5%</span></code>. Ahora tenemos suficiente información para aplicar el <code class="docutils literal notranslate"><span class="pre">Teorema</span> <span class="pre">de</span> <span class="pre">Bayes</span></code> y estimar la probabilidad de que una persona seleccionada al azar tenga cáncer si obtiene un resultado positivo en la prueba</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
P(\textsf{Cancer=True} | \textsf{Test=Positive}) &amp;= \frac{P(\textsf{Cancer=True})\cdot P(\textsf{Test=Positive} | \textsf{Cancer=True})}{P(Test=Positive)}\\
&amp;= \frac{(0.0002)\cdot(0.85)}{0.05016}\\
&amp;= \frac{0.00017}{0.05016}\\[2mm] 
&amp;= 0.003389154704944
\end{align*}
\end{split}\]</div>
<ul class="simple">
<li><p>El cálculo sugiere que si se informa al paciente de que tiene cáncer con esta prueba, sólo hay un <code class="docutils literal notranslate"><span class="pre">0.33%</span></code> de posibilidades de que lo tenga. Es una prueba de diagnóstico inadecuada.</p></li>
<li><p>El ejemplo también muestra que el cálculo de la probabilidad condicional requiere bastante información. Por ejemplo, si ya tenemos los valores utilizados en el <code class="docutils literal notranslate"><span class="pre">Teorema</span> <span class="pre">de</span> <span class="pre">Bayes</span></code>, podemos utilizarlos directamente.</p></li>
<li><p>Esto no suele ser así, y normalmente tenemos que calcular las partes que necesitamos y unirlos, como hicimos en este caso. En nuestro caso, se nos han dado tres datos: <code class="docutils literal notranslate"><span class="pre">la</span> <span class="pre">tasa</span> <span class="pre">base,</span> <span class="pre">la</span> <span class="pre">sensibilidad</span> <span class="pre">(o</span> <span class="pre">tasa</span> <span class="pre">de</span> <span class="pre">verdaderos</span> <span class="pre">positivos)</span> <span class="pre">y</span> <span class="pre">la</span> <span class="pre">especificidad</span> <span class="pre">(o</span> <span class="pre">tasa</span> <span class="pre">de</span> <span class="pre">verdaderos</span> <span class="pre">negativos).</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Sensibilidad</span></code>: el <code class="docutils literal notranslate"><span class="pre">85%</span></code> de las personas con cáncer obtendrán un resultado positivo en la prueba.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Tasa</span> <span class="pre">base</span></code>: El <code class="docutils literal notranslate"><span class="pre">0.02%</span></code> de las personas tienen cáncer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Especificidad</span></code>: el <code class="docutils literal notranslate"><span class="pre">95%</span></code> de las personas sin cáncer obtendrán un resultado negativo en la prueba.</p></li>
</ul>
</li>
<li><p>No disponíamos de la <span class="math notranslate nohighlight">\(P(\textsf{Prueba=Positiva})\)</span>, pero la calculamos teniendo en cuenta lo que ya teníamos disponible.</p></li>
<li><p>El <code class="docutils literal notranslate"><span class="pre">Teorema</span> <span class="pre">de</span> <span class="pre">Bayes</span></code> nos permite ser aún más precisos sobre un escenario dado. Por ejemplo, si tuviéramos más información sobre el paciente (por ejemplo, su edad) y sobre el ámbito (por ejemplo, las tasas de cáncer para los rangos de edad), podríamos ofrecer una estimación de la probabilidad aún más precisa.</p></li>
<li><p>Veamos cómo podemos calcular este escenario exacto utilizando unas pocas líneas de código <code class="docutils literal notranslate"><span class="pre">Python</span></code>.</p></li>
</ul>
</section>
<section id="calculo-usando-python">
<h4>Cálculo usando Python<a class="headerlink" href="#calculo-usando-python" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>El siguiente ejemplo realiza el mismo cálculo en <code class="docutils literal notranslate"><span class="pre">Python</span></code>, lo que le permite jugar con los parámetros y probar diferentes escenarios.</p></li>
<li><p>Calculamos las probabilidades: <span class="math notranslate nohighlight">\(P(A|B)\)</span> given <span class="math notranslate nohighlight">\(P(A)\)</span>, <span class="math notranslate nohighlight">\(P(B|A)\)</span>, <span class="math notranslate nohighlight">\(P(B|A^{c})\)</span></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">bayes_theorem</span><span class="p">(</span><span class="n">p_a</span><span class="p">,</span> <span class="n">p_b_given_a</span><span class="p">,</span> <span class="n">p_b_given_not_a</span><span class="p">):</span>
    
    <span class="n">not_a</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">p_a</span> <span class="c1"># P(not A)</span>
    <span class="n">p_b</span> <span class="o">=</span> <span class="n">p_b_given_a</span> <span class="o">*</span> <span class="n">p_a</span> <span class="o">+</span> <span class="n">p_b_given_not_a</span> <span class="o">*</span> <span class="n">not_a</span> <span class="c1"># P(B)</span>
    <span class="n">p_a_given_b</span> <span class="o">=</span> <span class="p">(</span><span class="n">p_b_given_a</span> <span class="o">*</span> <span class="n">p_a</span><span class="p">)</span> <span class="o">/</span> <span class="n">p_b</span> <span class="c1"># P(A|B)</span>
    
    <span class="k">return</span> <span class="n">p_a_given_b</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Datos dados por el problema a priori</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p_a</span> <span class="o">=</span> <span class="mf">0.0002</span> <span class="c1"># P(A)</span>
<span class="n">p_b_given_a</span> <span class="o">=</span> <span class="mf">0.85</span> <span class="c1"># P(B|A)</span>
<span class="n">p_b_given_not_a</span> <span class="o">=</span> <span class="mf">0.05</span> <span class="c1"># P(B|not A)</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Usando la función: <code class="docutils literal notranslate"><span class="pre">bayes_theorem</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">bayes_theorem</span><span class="p">(</span><span class="n">p_a</span><span class="p">,</span> <span class="n">p_b_given_a</span><span class="p">,</span> <span class="n">p_b_given_not_a</span><span class="p">)</span> <span class="c1"># P(A|B)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;P(A|B) = </span><span class="si">%.3f%%</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">result</span> <span class="o">*</span> <span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>P(A|B) = 0.339%
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Al ejecutar el ejemplo se calcula la probabilidad de que un paciente tenga cáncer si la prueba arroja un resultado positivo, lo que coincide con nuestro cálculo manual.</p></li>
</ul>
<blockquote>
<div><p><span class="math notranslate nohighlight">\(P(A|B)\)</span> = 0.339%</p>
</div></blockquote>
<ul class="simple">
<li><p>Este es un pequeño script útil que se puede adaptar a nuevos escenarios</p></li>
</ul>
</section>
</section>
<section id="clasificador-binario-terminologia">
<h3>Clasificador binario: Terminología<a class="headerlink" href="#clasificador-binario-terminologia" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Puede ser útil pensar en el ejemplo de la prueba del cáncer en términos de la <code class="docutils literal notranslate"><span class="pre">clasificación</span> <span class="pre">binaria</span></code> (de dos clases), es decir, de donde provienen las nociones de <a class="reference external" href="https://en.wikipedia.org/wiki/Sensitivity_and_specificity"><code class="docutils literal notranslate"><span class="pre">especificidad</span> <span class="pre">y</span> <span class="pre">sensibilidad</span></code></a>. Estos términos ayudan a que todo tenga más sentido.</p></li>
<li><p>En primer lugar, definamos una <code class="docutils literal notranslate"><span class="pre">matriz</span> <span class="pre">de</span> <span class="pre">confusión</span></code></p></li>
<li><p>Una <code class="docutils literal notranslate"><span class="pre">matriz</span> <span class="pre">de</span> <span class="pre">confusión</span></code> es un resumen de los resultados de las predicciones en un problema de clasificación. El número de predicciones correctas e incorrectas se resume con valores de recuento y se desglosa por cada clase. Esta es la clave de la matriz de confusión.</p></li>
<li><p>La matriz de confusión muestra las formas en que su modelo de clasificación se confunde cuando hace predicciones. Le da una idea no solo de los errores que comete su clasificador, sino, lo que es más importante, de los tipos de errores que se cometen</p></li>
</ul>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p>Clase positiva</p></th>
<th class="head"><p>Clase negativa</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Predicción positiva</strong></p></td>
<td><p>Verdaderos Positivos (VP)</p></td>
<td><p>Falsos Positivos (FP)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Predicción negativa</strong></p></td>
<td><p>Falsos Negativos (FN)</p></td>
<td><p>Verdaderos Negativos (VN)</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>A continuación, podemos definir algunos índices a partir de la matriz de confusión</p>
<ul>
<li><p>Tasa de verdaderos positivos: <span class="math notranslate nohighlight">\(TVP = \displaystyle{\frac{VP}{VP + FN}}\)</span></p></li>
<li><p>Tasa de falsos positivos:     <span class="math notranslate nohighlight">\(TFP = \displaystyle{\frac{FP}{FP + VN}}\)</span></p></li>
<li><p>Tasa de verdaderos negativos: <span class="math notranslate nohighlight">\(TVN = \displaystyle{\frac{VN}{VN + FP}}\)</span></p></li>
<li><p>Tasa de falsos negativos:     <span class="math notranslate nohighlight">\(TFN = \displaystyle{\frac{FN}{FN + VP}}\)</span></p></li>
</ul>
</li>
<li><p>Estos términos se denominan tasas, pero también pueden interpretarse como probabilidades. Nótese lo siguiente:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
TVP + TFN &amp;= 1.0\Rightarrow TFN = 1.0-TVP\quad\text{o}\quad TVP = 1.0-TFN\\
TVN + TFP &amp;= 1.0\Rightarrow TVN = 1.0-TFP\quad\text{o}\quad TFP = 1.0-TVN
\end{align*}
\end{split}\]</div>
<ul class="simple">
<li><p>Recordemos que en una sección anterior calculamos la tasa de falsos positivos dado el complemento de la tasa de verdaderos negativos, o <span class="math notranslate nohighlight">\(TFP = 1.0 - TVN\)</span>. Algunas de estas tasas tienen nombres especiales, por ejemplo:</p>
<ul>
<li><p>Sensibilidad  = <span class="math notranslate nohighlight">\(TVP\)</span></p></li>
<li><p>Especificidad = <span class="math notranslate nohighlight">\(TVN\)</span></p></li>
</ul>
</li>
<li><p>Podemos asignar estos índices a términos conocidos del <code class="docutils literal notranslate"><span class="pre">Teorema</span> <span class="pre">de</span> <span class="pre">Bayes</span></code>:</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(P(B|A)\)</span>: Tasa de verdaderos positivos: <span class="math notranslate nohighlight">\(TVP\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(P(B^{c}|A^{c})\)</span>: Tasa de verdaderos negativos <span class="math notranslate nohighlight">\(TVN\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(P(B|A^{c})\)</span>: Tasa de falsos positivos <span class="math notranslate nohighlight">\(TFP\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(P(B^{c}|A)\)</span>: Tasa de falsos negativos <span class="math notranslate nohighlight">\(TFN\)</span></p></li>
</ul>
</li>
<li><p>También podemos mapear las tasas base para la condición (<code class="docutils literal notranslate"><span class="pre">clase</span></code>) y el tratamiento (<code class="docutils literal notranslate"><span class="pre">predicción</span></code>) en términos familiares del <code class="docutils literal notranslate"><span class="pre">Teorema</span> <span class="pre">de</span> <span class="pre">Bayes</span></code>:</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(P(A)\)</span>: Probabilidad de un Clase Positiva (CP)</p></li>
<li><p><span class="math notranslate nohighlight">\(P(A^{c})\)</span>: Probabilidad de una Clase Negativa (CN)</p></li>
<li><p><span class="math notranslate nohighlight">\(P(B)\)</span>: Probabilidad de una Predicción Positiva (PP)</p></li>
<li><p><span class="math notranslate nohighlight">\(P(B^{c})\)</span>: Probabilidad de una Predicción Negativa (PN)</p></li>
</ul>
</li>
<li><p>Ahora, consideremos el <code class="docutils literal notranslate"><span class="pre">Teorema</span> <span class="pre">de</span> <span class="pre">Bayes</span></code> utilizando estos términos</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
P(A|B) &amp;= \frac{P(A)\cdot P(B|A)}{P(B)}\\ 
&amp;= \frac{CP\cdot TVP}{PP}
\end{align*}
\end{split}\]</div>
<ul class="simple">
<li><p>Cuando a menudo no podemos calcular <span class="math notranslate nohighlight">\(P(B)\)</span>, utilizamos una alternativa</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
P(B) &amp;= P(A)\cdot P(B|A)+P(A^{c})\cdot P(B|A^{c})\\
&amp;= CP\cdot TVP + CN\cdot TFP
\end{align*}
\end{split}\]</div>
<ul class="simple">
<li><p>Ahora, veamos nuestro escenario de cáncer y una prueba de detección de cáncer. La clase o condición sería <code class="docutils literal notranslate"><span class="pre">&quot;Cáncer&quot;</span></code> y el tratamiento o predicción sería la <code class="docutils literal notranslate"><span class="pre">&quot;Prueba&quot;</span></code>. En primer lugar, revisemos todos los índices:</p>
<ul>
<li><p>Tasa de verdaderos positivos (TVP): 85%</p></li>
<li><p>Tasa de falsos positivos (TFP): 5%</p></li>
<li><p>Tasa de verdaderos negativos (TVN): 95%.</p></li>
<li><p>Tasa de falsos negativos (TFN): 15%.</p></li>
</ul>
</li>
<li><p>Repasemos también lo que sabemos sobre las tasas básicas</p>
<ul>
<li><p>Clase positiva (CP): 0.02%</p></li>
<li><p>Clase negativa (CN): 99.98%</p></li>
<li><p>Predicción positiva (PP): 5.016%.</p></li>
<li><p>Predicción negativa (PN): 94.984%.</p></li>
</ul>
</li>
</ul>
<ul class="simple">
<li><p>Uniendo las cosas, podemos calcular la probabilidad de un resultado positivo de la prueba (una <code class="docutils literal notranslate"><span class="pre">predicción</span> <span class="pre">positiva</span></code>) como la probabilidad de un resultado positivo de la prueba dado que tiene cáncer (la <code class="docutils literal notranslate"><span class="pre">tasa</span> <span class="pre">positiva</span> <span class="pre">verdadera</span></code>) multiplicada por la tasa base de tener cáncer (la <code class="docutils literal notranslate"><span class="pre">clase</span> <span class="pre">positiva</span></code>), más la probabilidad de obtener un resultado positivo de la prueba dado que no tiene cáncer (la <code class="docutils literal notranslate"><span class="pre">tasa</span> <span class="pre">positiva</span> <span class="pre">falsa</span></code>) más la probabilidad de no tener cáncer (la <code class="docutils literal notranslate"><span class="pre">clase</span> <span class="pre">negativa</span></code>)</p></li>
<li><p>El cálculo con estos términos es el siguiente</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
P(B) &amp;= P(A)\cdot P(B|A) + P(A^{c})\cdot P(B|A^{c})\\
&amp;= CP\cdot TVP + CN\cdot TFP\\
&amp;= 85\%\cdot0.02\% + 5\%\cdot99.98\%\\
&amp;= 5.016\%
\end{align*}
\end{split}\]</div>
<ul class="simple">
<li><p>A continuación, podemos calcular el <code class="docutils literal notranslate"><span class="pre">Teorema</span> <span class="pre">de</span> <span class="pre">Bayes</span></code> para el escenario, es decir, la probabilidad de tener cáncer dado un resultado positivo de la prueba (la <code class="docutils literal notranslate"><span class="pre">posterior</span></code>) es la probabilidad de un resultado positivo de la prueba dado que tiene cáncer (la <code class="docutils literal notranslate"><span class="pre">tasa</span> <span class="pre">positiva</span> <span class="pre">verdadera</span></code>) multiplicada por la probabilidad de tener cáncer (la <code class="docutils literal notranslate"><span class="pre">tasa</span> <span class="pre">de</span> <span class="pre">clase</span> <span class="pre">positiva</span></code>), dividida por la probabilidad de un resultado positivo de la prueba (una <code class="docutils literal notranslate"><span class="pre">predicción</span> <span class="pre">positiva</span></code>). El cálculo con estos términos es el siguiente:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
P(A|B) &amp;= \frac{P(A)\cdot P(B|A)}{P(B)}\\
&amp;= \frac{PC\cdot TVP}{PP}\\
&amp;= \frac{85\%\cdot0.02\%}{5.016\%}\\ 
&amp;= 0.339%
\end{align*}
\end{split}\]</div>
<ul class="simple">
<li><p>Resulta que en este caso, la probabilidad posterior que estamos calculando con el <code class="docutils literal notranslate"><span class="pre">Teorema</span> <span class="pre">de</span> <span class="pre">Bayes</span></code> es equivalente a la precisión, también llamada <code class="docutils literal notranslate"><span class="pre">Valor</span> <span class="pre">Predictivo</span> <span class="pre">Positivo</span> <span class="pre">(VPP)</span></code> de la matriz de confusión</p></li>
</ul>
<div class="math notranslate nohighlight">
\[VPP = \frac{VP}{VP + FP}\]</div>
<ul class="simple">
<li><p>O, dicho en términos de nuestro clasificador:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
P(A|B) &amp;= VPP\\
VPP &amp;= \frac{TVP\cdot CP}{PP} 
\end{align*}
\end{split}\]</div>
<ul class="simple">
<li><p>Entonces, <code class="docutils literal notranslate"><span class="pre">¿por</span> <span class="pre">qué</span> <span class="pre">nos</span> <span class="pre">tomamos</span> <span class="pre">la</span> <span class="pre">molestia</span> <span class="pre">de</span> <span class="pre">calcular</span> <span class="pre">la</span> <span class="pre">probabilidad</span> <span class="pre">posterior?</span></code>. Porque no tenemos la matriz de confusión para una población de personas con y sin cáncer que se han sometido a la prueba y que no se han sometido a ella. En lugar de ello, todo lo que tenemos son algunas probabilidades a priori sobre nuestra población y nuestra prueba.</p></li>
<li><p>Esto pone de manifiesto cuándo podríamos optar por utilizar el cálculo en la práctica. En concreto, cuando tenemos creencias sobre los eventos implicados, pero no podemos realizar el cálculo contando ejemplos en el mundo real.</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">Ejercicio</span></code></strong>: Escriba un par de funciones en <code class="docutils literal notranslate"><span class="pre">Python</span></code> para calcular: <span class="math notranslate nohighlight">\(P(B)\)</span> y <span class="math notranslate nohighlight">\(P(A|B)\)</span>, usando solamente:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Sensibilidad</span></code>: el <code class="docutils literal notranslate"><span class="pre">85%</span></code> de las personas con cáncer obtendrán un resultado positivo en la prueba</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Tasa</span> <span class="pre">base</span></code>: El <code class="docutils literal notranslate"><span class="pre">0.02%</span></code> de las personas tienen cáncer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Especificidad</span></code>: el <code class="docutils literal notranslate"><span class="pre">95%</span></code> de las personas sin cáncer obtendrán un resultado negativo en la prueba.</p></li>
</ul>
</section>
<section id="ventas-en-supermercados">
<h3>Ventas en supermercados<a class="headerlink" href="#ventas-en-supermercados" title="Permalink to this headline">¶</a></h3>
<p><strong><code class="docutils literal notranslate"><span class="pre">Contexto</span></code></strong></p>
<ul class="simple">
<li><p>El crecimiento de los supermercados en la mayoría de las ciudades pobladas es cada vez mayor y la competencia en el mercado también es alta. El conjunto de datos comprende el histórico de ventas de supermercados que se ha registrado en 3 sucursales diferentes durante 3 meses. Realizaremos un análisis exploatorio de los datos para tratar de identificar patrones importantes en los datos</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Información</span> <span class="pre">de</span> <span class="pre">atributos</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Invoice</span> <span class="pre">id</span></code>: Número de identificación de la factura de venta generado por ordenador</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Branch</span></code>: Sucursal del supercentro (se dispone de 3 sucursales identificadas por A, B y C).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">City</span></code>: Ubicación de los supercentros</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Customer</span> <span class="pre">type</span></code>: Tipo de clientes, registrado por Socios para los clientes que usan tarjeta de socio y Normal para los que no tienen tarjeta de socio.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Gender</span></code>: Tipo de género del cliente</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Product</span> <span class="pre">line</span></code>: Grupos de categorización de artículos generales - Accesorios electrónicos, Accesorios de moda, Alimentos y bebidas, Salud y belleza, Hogar y estilo de vida, Deportes y viajes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Unit</span> <span class="pre">price</span></code>: Precio unitario: Precio de cada producto en USD.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Quantity</span></code> : Número de productos comprados por el cliente</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Tax</span></code>: Tasa de impuesto del 5% para la compra del cliente</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Total</span></code>: Precio total con impuestos incluidos</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Date</span></code>: Fecha de compra (Registro disponible desde enero de 2019 hasta marzo de 2019)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Time</span></code>: Hora de la compra (de 10 a 21 horas)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Payment</span></code>: Pago utilizado por el cliente para la compra (hay 3 métodos disponibles: efectivo, tarjeta de crédito y Ewallet)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">COGS</span></code>: Coste de la mercancía vendida</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Gross</span> <span class="pre">margin</span> <span class="pre">percentage</span></code>: Porcentaje de margen bruto</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Gross</span> <span class="pre">income</span></code>: Ingreso bruto</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Rating</span></code>: Calificación de la estratificación de los clientes sobre su experiencia general de compra (En una escala de 1 a 10)</p></li>
</ul>
</li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">Esquema</span> <span class="pre">del</span> <span class="pre">proyecto</span></code></strong></p>
<ul class="simple">
<li><p>Instalar e importar las librerias necesarias</p></li>
<li><p>Descargue el conjunto de datos</p></li>
<li><p>Realice un análisis exploratorio y una visualización</p></li>
<li><p>Formular y responder preguntas sobre los datos</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">Instalación</span> <span class="pre">de</span> <span class="pre">las</span> <span class="pre">bibliotecas</span> <span class="pre">necesarias</span></code></strong></p>
<ul class="simple">
<li><p>Comenzamos instalando las librerías necesarias como <code class="docutils literal notranslate"><span class="pre">Pandas,</span> <span class="pre">NumPy,</span> <span class="pre">Matplotlib,</span> <span class="pre">Seaborn</span></code> y <code class="docutils literal notranslate"><span class="pre">Folium</span></code></p></li>
<li><p>Importe cada librería</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span> 
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">missingno</span> <span class="k">as</span> <span class="nn">msno</span>
<span class="kn">import</span> <span class="nn">folium</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
</pre></div>
</div>
</div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">Cargue</span> <span class="pre">los</span> <span class="pre">datos</span> <span class="pre">desde</span> <span class="pre">el</span> <span class="pre">link</span> <span class="pre">de</span> <span class="pre">Github</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_url</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/lihkir/Uninorte/main/AppliedStatisticMS/DataVisualizationRPython/Lectures/Python/PythonDataSets/supermarket_sales.csv&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">supermarket_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">dataset_url</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">supermarket_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;GnBu&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_b396f_row0_col6 {
  background-color: #1272b1;
  color: #f1f1f1;
}
#T_b396f_row0_col7, #T_b396f_row2_col7, #T_b396f_row4_col7 {
  background-color: #42a6cc;
  color: #f1f1f1;
}
#T_b396f_row0_col8, #T_b396f_row0_col9, #T_b396f_row0_col13, #T_b396f_row0_col15 {
  background-color: #1070b0;
  color: #f1f1f1;
}
#T_b396f_row0_col14, #T_b396f_row1_col6, #T_b396f_row1_col7, #T_b396f_row1_col8, #T_b396f_row1_col9, #T_b396f_row1_col13, #T_b396f_row1_col14, #T_b396f_row1_col15, #T_b396f_row2_col14, #T_b396f_row3_col14, #T_b396f_row4_col14, #T_b396f_row4_col16 {
  background-color: #f7fcf0;
  color: #000000;
}
#T_b396f_row0_col16 {
  background-color: #0864a8;
  color: #f1f1f1;
}
#T_b396f_row1_col16, #T_b396f_row3_col7, #T_b396f_row4_col6, #T_b396f_row4_col8, #T_b396f_row4_col9, #T_b396f_row4_col13, #T_b396f_row4_col15 {
  background-color: #084081;
  color: #f1f1f1;
}
#T_b396f_row2_col6 {
  background-color: #92d5bc;
  color: #000000;
}
#T_b396f_row2_col8, #T_b396f_row2_col9, #T_b396f_row2_col13, #T_b396f_row2_col15 {
  background-color: #86d0c0;
  color: #000000;
}
#T_b396f_row2_col16 {
  background-color: #7fcdc3;
  color: #000000;
}
#T_b396f_row3_col6 {
  background-color: #56b7d0;
  color: #f1f1f1;
}
#T_b396f_row3_col8, #T_b396f_row3_col9, #T_b396f_row3_col13, #T_b396f_row3_col15 {
  background-color: #2f90c0;
  color: #f1f1f1;
}
#T_b396f_row3_col16 {
  background-color: #3395c3;
  color: #f1f1f1;
}
</style>
<table id="T_b396f">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_b396f_level0_col0" class="col_heading level0 col0" >Invoice ID</th>
      <th id="T_b396f_level0_col1" class="col_heading level0 col1" >Branch</th>
      <th id="T_b396f_level0_col2" class="col_heading level0 col2" >City</th>
      <th id="T_b396f_level0_col3" class="col_heading level0 col3" >Customer type</th>
      <th id="T_b396f_level0_col4" class="col_heading level0 col4" >Gender</th>
      <th id="T_b396f_level0_col5" class="col_heading level0 col5" >Product line</th>
      <th id="T_b396f_level0_col6" class="col_heading level0 col6" >Unit price</th>
      <th id="T_b396f_level0_col7" class="col_heading level0 col7" >Quantity</th>
      <th id="T_b396f_level0_col8" class="col_heading level0 col8" >Tax 5%</th>
      <th id="T_b396f_level0_col9" class="col_heading level0 col9" >Total</th>
      <th id="T_b396f_level0_col10" class="col_heading level0 col10" >Date</th>
      <th id="T_b396f_level0_col11" class="col_heading level0 col11" >Time</th>
      <th id="T_b396f_level0_col12" class="col_heading level0 col12" >Payment</th>
      <th id="T_b396f_level0_col13" class="col_heading level0 col13" >cogs</th>
      <th id="T_b396f_level0_col14" class="col_heading level0 col14" >gross margin percentage</th>
      <th id="T_b396f_level0_col15" class="col_heading level0 col15" >gross income</th>
      <th id="T_b396f_level0_col16" class="col_heading level0 col16" >Rating</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_b396f_level0_row0" class="row_heading level0 row0" >0</th>
      <td id="T_b396f_row0_col0" class="data row0 col0" >750-67-8428</td>
      <td id="T_b396f_row0_col1" class="data row0 col1" >A</td>
      <td id="T_b396f_row0_col2" class="data row0 col2" >Yangon</td>
      <td id="T_b396f_row0_col3" class="data row0 col3" >Member</td>
      <td id="T_b396f_row0_col4" class="data row0 col4" >Female</td>
      <td id="T_b396f_row0_col5" class="data row0 col5" >Health and beauty</td>
      <td id="T_b396f_row0_col6" class="data row0 col6" >74.690000</td>
      <td id="T_b396f_row0_col7" class="data row0 col7" >7</td>
      <td id="T_b396f_row0_col8" class="data row0 col8" >26.141500</td>
      <td id="T_b396f_row0_col9" class="data row0 col9" >548.971500</td>
      <td id="T_b396f_row0_col10" class="data row0 col10" >1/5/2019</td>
      <td id="T_b396f_row0_col11" class="data row0 col11" >13:08</td>
      <td id="T_b396f_row0_col12" class="data row0 col12" >Ewallet</td>
      <td id="T_b396f_row0_col13" class="data row0 col13" >522.830000</td>
      <td id="T_b396f_row0_col14" class="data row0 col14" >4.761905</td>
      <td id="T_b396f_row0_col15" class="data row0 col15" >26.141500</td>
      <td id="T_b396f_row0_col16" class="data row0 col16" >9.100000</td>
    </tr>
    <tr>
      <th id="T_b396f_level0_row1" class="row_heading level0 row1" >1</th>
      <td id="T_b396f_row1_col0" class="data row1 col0" >226-31-3081</td>
      <td id="T_b396f_row1_col1" class="data row1 col1" >C</td>
      <td id="T_b396f_row1_col2" class="data row1 col2" >Naypyitaw</td>
      <td id="T_b396f_row1_col3" class="data row1 col3" >Normal</td>
      <td id="T_b396f_row1_col4" class="data row1 col4" >Female</td>
      <td id="T_b396f_row1_col5" class="data row1 col5" >Electronic accessories</td>
      <td id="T_b396f_row1_col6" class="data row1 col6" >15.280000</td>
      <td id="T_b396f_row1_col7" class="data row1 col7" >5</td>
      <td id="T_b396f_row1_col8" class="data row1 col8" >3.820000</td>
      <td id="T_b396f_row1_col9" class="data row1 col9" >80.220000</td>
      <td id="T_b396f_row1_col10" class="data row1 col10" >3/8/2019</td>
      <td id="T_b396f_row1_col11" class="data row1 col11" >10:29</td>
      <td id="T_b396f_row1_col12" class="data row1 col12" >Cash</td>
      <td id="T_b396f_row1_col13" class="data row1 col13" >76.400000</td>
      <td id="T_b396f_row1_col14" class="data row1 col14" >4.761905</td>
      <td id="T_b396f_row1_col15" class="data row1 col15" >3.820000</td>
      <td id="T_b396f_row1_col16" class="data row1 col16" >9.600000</td>
    </tr>
    <tr>
      <th id="T_b396f_level0_row2" class="row_heading level0 row2" >2</th>
      <td id="T_b396f_row2_col0" class="data row2 col0" >631-41-3108</td>
      <td id="T_b396f_row2_col1" class="data row2 col1" >A</td>
      <td id="T_b396f_row2_col2" class="data row2 col2" >Yangon</td>
      <td id="T_b396f_row2_col3" class="data row2 col3" >Normal</td>
      <td id="T_b396f_row2_col4" class="data row2 col4" >Male</td>
      <td id="T_b396f_row2_col5" class="data row2 col5" >Home and lifestyle</td>
      <td id="T_b396f_row2_col6" class="data row2 col6" >46.330000</td>
      <td id="T_b396f_row2_col7" class="data row2 col7" >7</td>
      <td id="T_b396f_row2_col8" class="data row2 col8" >16.215500</td>
      <td id="T_b396f_row2_col9" class="data row2 col9" >340.525500</td>
      <td id="T_b396f_row2_col10" class="data row2 col10" >3/3/2019</td>
      <td id="T_b396f_row2_col11" class="data row2 col11" >13:23</td>
      <td id="T_b396f_row2_col12" class="data row2 col12" >Credit card</td>
      <td id="T_b396f_row2_col13" class="data row2 col13" >324.310000</td>
      <td id="T_b396f_row2_col14" class="data row2 col14" >4.761905</td>
      <td id="T_b396f_row2_col15" class="data row2 col15" >16.215500</td>
      <td id="T_b396f_row2_col16" class="data row2 col16" >7.400000</td>
    </tr>
    <tr>
      <th id="T_b396f_level0_row3" class="row_heading level0 row3" >3</th>
      <td id="T_b396f_row3_col0" class="data row3 col0" >123-19-1176</td>
      <td id="T_b396f_row3_col1" class="data row3 col1" >A</td>
      <td id="T_b396f_row3_col2" class="data row3 col2" >Yangon</td>
      <td id="T_b396f_row3_col3" class="data row3 col3" >Member</td>
      <td id="T_b396f_row3_col4" class="data row3 col4" >Male</td>
      <td id="T_b396f_row3_col5" class="data row3 col5" >Health and beauty</td>
      <td id="T_b396f_row3_col6" class="data row3 col6" >58.220000</td>
      <td id="T_b396f_row3_col7" class="data row3 col7" >8</td>
      <td id="T_b396f_row3_col8" class="data row3 col8" >23.288000</td>
      <td id="T_b396f_row3_col9" class="data row3 col9" >489.048000</td>
      <td id="T_b396f_row3_col10" class="data row3 col10" >1/27/2019</td>
      <td id="T_b396f_row3_col11" class="data row3 col11" >20:33</td>
      <td id="T_b396f_row3_col12" class="data row3 col12" >Ewallet</td>
      <td id="T_b396f_row3_col13" class="data row3 col13" >465.760000</td>
      <td id="T_b396f_row3_col14" class="data row3 col14" >4.761905</td>
      <td id="T_b396f_row3_col15" class="data row3 col15" >23.288000</td>
      <td id="T_b396f_row3_col16" class="data row3 col16" >8.400000</td>
    </tr>
    <tr>
      <th id="T_b396f_level0_row4" class="row_heading level0 row4" >4</th>
      <td id="T_b396f_row4_col0" class="data row4 col0" >373-73-7910</td>
      <td id="T_b396f_row4_col1" class="data row4 col1" >A</td>
      <td id="T_b396f_row4_col2" class="data row4 col2" >Yangon</td>
      <td id="T_b396f_row4_col3" class="data row4 col3" >Normal</td>
      <td id="T_b396f_row4_col4" class="data row4 col4" >Male</td>
      <td id="T_b396f_row4_col5" class="data row4 col5" >Sports and travel</td>
      <td id="T_b396f_row4_col6" class="data row4 col6" >86.310000</td>
      <td id="T_b396f_row4_col7" class="data row4 col7" >7</td>
      <td id="T_b396f_row4_col8" class="data row4 col8" >30.208500</td>
      <td id="T_b396f_row4_col9" class="data row4 col9" >634.378500</td>
      <td id="T_b396f_row4_col10" class="data row4 col10" >2/8/2019</td>
      <td id="T_b396f_row4_col11" class="data row4 col11" >10:37</td>
      <td id="T_b396f_row4_col12" class="data row4 col12" >Ewallet</td>
      <td id="T_b396f_row4_col13" class="data row4 col13" >604.170000</td>
      <td id="T_b396f_row4_col14" class="data row4 col14" >4.761905</td>
      <td id="T_b396f_row4_col15" class="data row4 col15" >30.208500</td>
      <td id="T_b396f_row4_col16" class="data row4 col16" >5.300000</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<ul class="simple">
<li><p>Nótese que la intensidad del color en las celdas de cada columna aumentan o disminuyen, dependiendo de la magnitud de los valores en cada casilla. Después de leer los datos, los preprocesamos.</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">Probabilidades</span></code></strong></p>
<ul class="simple">
<li><p>Verifique si existe alguna diferencia, entre las probabilidades de que las compras hayan sido realizadas por hombres o por mujeres: <code class="docutils literal notranslate"><span class="pre">Male</span></code> o <code class="docutils literal notranslate"><span class="pre">Female</span></code>. Recuerde la formula para la probabilidad clasica</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
P(A)=\frac{N(A)}{N}
\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">N_t</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">supermarket_df</span><span class="p">)</span>
<span class="n">N_m</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">supermarket_df</span><span class="p">[</span><span class="n">supermarket_df</span><span class="p">[</span><span class="s2">&quot;Gender&quot;</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;Female&quot;</span><span class="p">])</span>
<span class="n">N_h</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">supermarket_df</span><span class="p">[</span><span class="n">supermarket_df</span><span class="p">[</span><span class="s2">&quot;Gender&quot;</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;Male&quot;</span><span class="p">])</span>

<span class="n">P_h</span> <span class="o">=</span> <span class="mi">100</span><span class="o">*</span><span class="p">(</span><span class="n">N_h</span><span class="o">/</span><span class="n">N_t</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Probabilidad compras realizadas -&gt; Hombres = %&quot;</span><span class="p">,</span> <span class="n">P_h</span><span class="p">)</span>

<span class="n">P_m</span> <span class="o">=</span> <span class="mi">100</span><span class="o">*</span><span class="p">(</span><span class="n">N_m</span><span class="o">/</span><span class="n">N_t</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Probabilidad compras realizadas -&gt; Mujeres = %&quot;</span><span class="p">,</span> <span class="n">P_m</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Probabilidad compras realizadas -&gt; Hombres = % 49.9
Probabilidad compras realizadas -&gt; Mujeres = % 50.1
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Verifique si existe alguna diferencia, entre las probabilidades de que las compras relacionadas con salud y belleza <code class="docutils literal notranslate"><span class="pre">Health</span> <span class="pre">and</span> <span class="pre">beauty</span></code> hayan sido realizadas por hombres o por mujeres</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Nhb_h</span> <span class="o">=</span> <span class="n">supermarket_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">supermarket_df</span><span class="p">[</span><span class="s2">&quot;Product line&quot;</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;Health and beauty&quot;</span><span class="p">)</span> <span class="o">&amp;</span> 
                            <span class="p">(</span><span class="n">supermarket_df</span><span class="p">[</span><span class="s2">&quot;Gender&quot;</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;Male&quot;</span><span class="p">)]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">Nhb_m</span> <span class="o">=</span> <span class="n">supermarket_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">supermarket_df</span><span class="p">[</span><span class="s2">&quot;Product line&quot;</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;Health and beauty&quot;</span><span class="p">)</span> <span class="o">&amp;</span> 
                            <span class="p">(</span><span class="n">supermarket_df</span><span class="p">[</span><span class="s2">&quot;Gender&quot;</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;Female&quot;</span><span class="p">)]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">Nhb_t</span> <span class="o">=</span> <span class="n">supermarket_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">supermarket_df</span><span class="p">[</span><span class="s2">&quot;Product line&quot;</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;Health and beauty&quot;</span><span class="p">)]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>


<span class="n">Phb_h</span> <span class="o">=</span> <span class="mi">100</span><span class="o">*</span><span class="p">(</span><span class="n">Nhb_h</span><span class="o">/</span><span class="n">Nhb_t</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Probabilidad caso Health and beauty -&gt; Hombres = %&quot;</span><span class="p">,</span> <span class="n">Phb_h</span><span class="p">)</span>

<span class="n">Phb_m</span> <span class="o">=</span> <span class="mi">100</span><span class="o">*</span><span class="p">(</span><span class="n">Nhb_m</span><span class="o">/</span><span class="n">Nhb_t</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Probabilidad caso Health and beauty -&gt; Mujeres = %&quot;</span><span class="p">,</span> <span class="n">Phb_m</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Probabilidad caso Health and beauty -&gt; Hombres = % 57.89473684210527
Probabilidad caso Health and beauty -&gt; Mujeres = % 42.10526315789473
</pre></div>
</div>
</div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">Preprocesamiento</span> <span class="pre">de</span> <span class="pre">datos</span></code></strong></p>
<ul class="simple">
<li><p>Calculamos el número de filas y columnas e identificamos si hay datos faltantes</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">shape</span> <span class="o">=</span> <span class="n">supermarket_df</span><span class="o">.</span><span class="n">shape</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;#Filas = </span><span class="si">{</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">, #Columnas = </span><span class="si">{</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>#Filas = 1000, #Columnas = 17
</pre></div>
</div>
</div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">Visualizamos</span> <span class="pre">los</span> <span class="pre">valores</span> <span class="pre">NaN</span> <span class="pre">en</span> <span class="pre">cada</span> <span class="pre">columna</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">displot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">supermarket_df</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">value_name</span><span class="o">=</span><span class="s2">&quot;missing&quot;</span><span class="p">),</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;variable&quot;</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;missing&quot;</span><span class="p">,</span>
    <span class="n">multiple</span><span class="o">=</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span>
    <span class="n">aspect</span><span class="o">=</span><span class="mf">1.25</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;seaborn.axisgrid.FacetGrid at 0x7f6d63f2c970&gt;
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 720x1440 with 0 Axes&gt;
</pre></div>
</div>
<img alt="_images/bayes_theorem_52_2.png" src="_images/bayes_theorem_52_2.png" />
</div>
</div>
<ul class="simple">
<li><p>No tenemos datos faltantes. Realizamos ahora pasos adicionales como el análisis de fechas y la creación de columnas adicionales.</p></li>
<li><p>Convertimos las columnas de fecha en fecha-hora</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">supermarket_df</span><span class="o">.</span><span class="n">Date</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">supermarket_df</span><span class="o">.</span><span class="n">Date</span><span class="p">)</span>
<span class="n">supermarket_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;GnBu&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_eb673_row0_col6 {
  background-color: #1272b1;
  color: #f1f1f1;
}
#T_eb673_row0_col7, #T_eb673_row2_col7, #T_eb673_row4_col7 {
  background-color: #42a6cc;
  color: #f1f1f1;
}
#T_eb673_row0_col8, #T_eb673_row0_col9, #T_eb673_row0_col13, #T_eb673_row0_col15 {
  background-color: #1070b0;
  color: #f1f1f1;
}
#T_eb673_row0_col14, #T_eb673_row1_col6, #T_eb673_row1_col7, #T_eb673_row1_col8, #T_eb673_row1_col9, #T_eb673_row1_col13, #T_eb673_row1_col14, #T_eb673_row1_col15, #T_eb673_row2_col14, #T_eb673_row3_col14, #T_eb673_row4_col14, #T_eb673_row4_col16 {
  background-color: #f7fcf0;
  color: #000000;
}
#T_eb673_row0_col16 {
  background-color: #0864a8;
  color: #f1f1f1;
}
#T_eb673_row1_col16, #T_eb673_row3_col7, #T_eb673_row4_col6, #T_eb673_row4_col8, #T_eb673_row4_col9, #T_eb673_row4_col13, #T_eb673_row4_col15 {
  background-color: #084081;
  color: #f1f1f1;
}
#T_eb673_row2_col6 {
  background-color: #92d5bc;
  color: #000000;
}
#T_eb673_row2_col8, #T_eb673_row2_col9, #T_eb673_row2_col13, #T_eb673_row2_col15 {
  background-color: #86d0c0;
  color: #000000;
}
#T_eb673_row2_col16 {
  background-color: #7fcdc3;
  color: #000000;
}
#T_eb673_row3_col6 {
  background-color: #56b7d0;
  color: #f1f1f1;
}
#T_eb673_row3_col8, #T_eb673_row3_col9, #T_eb673_row3_col13, #T_eb673_row3_col15 {
  background-color: #2f90c0;
  color: #f1f1f1;
}
#T_eb673_row3_col16 {
  background-color: #3395c3;
  color: #f1f1f1;
}
</style>
<table id="T_eb673">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_eb673_level0_col0" class="col_heading level0 col0" >Invoice ID</th>
      <th id="T_eb673_level0_col1" class="col_heading level0 col1" >Branch</th>
      <th id="T_eb673_level0_col2" class="col_heading level0 col2" >City</th>
      <th id="T_eb673_level0_col3" class="col_heading level0 col3" >Customer type</th>
      <th id="T_eb673_level0_col4" class="col_heading level0 col4" >Gender</th>
      <th id="T_eb673_level0_col5" class="col_heading level0 col5" >Product line</th>
      <th id="T_eb673_level0_col6" class="col_heading level0 col6" >Unit price</th>
      <th id="T_eb673_level0_col7" class="col_heading level0 col7" >Quantity</th>
      <th id="T_eb673_level0_col8" class="col_heading level0 col8" >Tax 5%</th>
      <th id="T_eb673_level0_col9" class="col_heading level0 col9" >Total</th>
      <th id="T_eb673_level0_col10" class="col_heading level0 col10" >Date</th>
      <th id="T_eb673_level0_col11" class="col_heading level0 col11" >Time</th>
      <th id="T_eb673_level0_col12" class="col_heading level0 col12" >Payment</th>
      <th id="T_eb673_level0_col13" class="col_heading level0 col13" >cogs</th>
      <th id="T_eb673_level0_col14" class="col_heading level0 col14" >gross margin percentage</th>
      <th id="T_eb673_level0_col15" class="col_heading level0 col15" >gross income</th>
      <th id="T_eb673_level0_col16" class="col_heading level0 col16" >Rating</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_eb673_level0_row0" class="row_heading level0 row0" >0</th>
      <td id="T_eb673_row0_col0" class="data row0 col0" >750-67-8428</td>
      <td id="T_eb673_row0_col1" class="data row0 col1" >A</td>
      <td id="T_eb673_row0_col2" class="data row0 col2" >Yangon</td>
      <td id="T_eb673_row0_col3" class="data row0 col3" >Member</td>
      <td id="T_eb673_row0_col4" class="data row0 col4" >Female</td>
      <td id="T_eb673_row0_col5" class="data row0 col5" >Health and beauty</td>
      <td id="T_eb673_row0_col6" class="data row0 col6" >74.690000</td>
      <td id="T_eb673_row0_col7" class="data row0 col7" >7</td>
      <td id="T_eb673_row0_col8" class="data row0 col8" >26.141500</td>
      <td id="T_eb673_row0_col9" class="data row0 col9" >548.971500</td>
      <td id="T_eb673_row0_col10" class="data row0 col10" >2019-01-05 00:00:00</td>
      <td id="T_eb673_row0_col11" class="data row0 col11" >13:08</td>
      <td id="T_eb673_row0_col12" class="data row0 col12" >Ewallet</td>
      <td id="T_eb673_row0_col13" class="data row0 col13" >522.830000</td>
      <td id="T_eb673_row0_col14" class="data row0 col14" >4.761905</td>
      <td id="T_eb673_row0_col15" class="data row0 col15" >26.141500</td>
      <td id="T_eb673_row0_col16" class="data row0 col16" >9.100000</td>
    </tr>
    <tr>
      <th id="T_eb673_level0_row1" class="row_heading level0 row1" >1</th>
      <td id="T_eb673_row1_col0" class="data row1 col0" >226-31-3081</td>
      <td id="T_eb673_row1_col1" class="data row1 col1" >C</td>
      <td id="T_eb673_row1_col2" class="data row1 col2" >Naypyitaw</td>
      <td id="T_eb673_row1_col3" class="data row1 col3" >Normal</td>
      <td id="T_eb673_row1_col4" class="data row1 col4" >Female</td>
      <td id="T_eb673_row1_col5" class="data row1 col5" >Electronic accessories</td>
      <td id="T_eb673_row1_col6" class="data row1 col6" >15.280000</td>
      <td id="T_eb673_row1_col7" class="data row1 col7" >5</td>
      <td id="T_eb673_row1_col8" class="data row1 col8" >3.820000</td>
      <td id="T_eb673_row1_col9" class="data row1 col9" >80.220000</td>
      <td id="T_eb673_row1_col10" class="data row1 col10" >2019-03-08 00:00:00</td>
      <td id="T_eb673_row1_col11" class="data row1 col11" >10:29</td>
      <td id="T_eb673_row1_col12" class="data row1 col12" >Cash</td>
      <td id="T_eb673_row1_col13" class="data row1 col13" >76.400000</td>
      <td id="T_eb673_row1_col14" class="data row1 col14" >4.761905</td>
      <td id="T_eb673_row1_col15" class="data row1 col15" >3.820000</td>
      <td id="T_eb673_row1_col16" class="data row1 col16" >9.600000</td>
    </tr>
    <tr>
      <th id="T_eb673_level0_row2" class="row_heading level0 row2" >2</th>
      <td id="T_eb673_row2_col0" class="data row2 col0" >631-41-3108</td>
      <td id="T_eb673_row2_col1" class="data row2 col1" >A</td>
      <td id="T_eb673_row2_col2" class="data row2 col2" >Yangon</td>
      <td id="T_eb673_row2_col3" class="data row2 col3" >Normal</td>
      <td id="T_eb673_row2_col4" class="data row2 col4" >Male</td>
      <td id="T_eb673_row2_col5" class="data row2 col5" >Home and lifestyle</td>
      <td id="T_eb673_row2_col6" class="data row2 col6" >46.330000</td>
      <td id="T_eb673_row2_col7" class="data row2 col7" >7</td>
      <td id="T_eb673_row2_col8" class="data row2 col8" >16.215500</td>
      <td id="T_eb673_row2_col9" class="data row2 col9" >340.525500</td>
      <td id="T_eb673_row2_col10" class="data row2 col10" >2019-03-03 00:00:00</td>
      <td id="T_eb673_row2_col11" class="data row2 col11" >13:23</td>
      <td id="T_eb673_row2_col12" class="data row2 col12" >Credit card</td>
      <td id="T_eb673_row2_col13" class="data row2 col13" >324.310000</td>
      <td id="T_eb673_row2_col14" class="data row2 col14" >4.761905</td>
      <td id="T_eb673_row2_col15" class="data row2 col15" >16.215500</td>
      <td id="T_eb673_row2_col16" class="data row2 col16" >7.400000</td>
    </tr>
    <tr>
      <th id="T_eb673_level0_row3" class="row_heading level0 row3" >3</th>
      <td id="T_eb673_row3_col0" class="data row3 col0" >123-19-1176</td>
      <td id="T_eb673_row3_col1" class="data row3 col1" >A</td>
      <td id="T_eb673_row3_col2" class="data row3 col2" >Yangon</td>
      <td id="T_eb673_row3_col3" class="data row3 col3" >Member</td>
      <td id="T_eb673_row3_col4" class="data row3 col4" >Male</td>
      <td id="T_eb673_row3_col5" class="data row3 col5" >Health and beauty</td>
      <td id="T_eb673_row3_col6" class="data row3 col6" >58.220000</td>
      <td id="T_eb673_row3_col7" class="data row3 col7" >8</td>
      <td id="T_eb673_row3_col8" class="data row3 col8" >23.288000</td>
      <td id="T_eb673_row3_col9" class="data row3 col9" >489.048000</td>
      <td id="T_eb673_row3_col10" class="data row3 col10" >2019-01-27 00:00:00</td>
      <td id="T_eb673_row3_col11" class="data row3 col11" >20:33</td>
      <td id="T_eb673_row3_col12" class="data row3 col12" >Ewallet</td>
      <td id="T_eb673_row3_col13" class="data row3 col13" >465.760000</td>
      <td id="T_eb673_row3_col14" class="data row3 col14" >4.761905</td>
      <td id="T_eb673_row3_col15" class="data row3 col15" >23.288000</td>
      <td id="T_eb673_row3_col16" class="data row3 col16" >8.400000</td>
    </tr>
    <tr>
      <th id="T_eb673_level0_row4" class="row_heading level0 row4" >4</th>
      <td id="T_eb673_row4_col0" class="data row4 col0" >373-73-7910</td>
      <td id="T_eb673_row4_col1" class="data row4 col1" >A</td>
      <td id="T_eb673_row4_col2" class="data row4 col2" >Yangon</td>
      <td id="T_eb673_row4_col3" class="data row4 col3" >Normal</td>
      <td id="T_eb673_row4_col4" class="data row4 col4" >Male</td>
      <td id="T_eb673_row4_col5" class="data row4 col5" >Sports and travel</td>
      <td id="T_eb673_row4_col6" class="data row4 col6" >86.310000</td>
      <td id="T_eb673_row4_col7" class="data row4 col7" >7</td>
      <td id="T_eb673_row4_col8" class="data row4 col8" >30.208500</td>
      <td id="T_eb673_row4_col9" class="data row4 col9" >634.378500</td>
      <td id="T_eb673_row4_col10" class="data row4 col10" >2019-02-08 00:00:00</td>
      <td id="T_eb673_row4_col11" class="data row4 col11" >10:37</td>
      <td id="T_eb673_row4_col12" class="data row4 col12" >Ewallet</td>
      <td id="T_eb673_row4_col13" class="data row4 col13" >604.170000</td>
      <td id="T_eb673_row4_col14" class="data row4 col14" >4.761905</td>
      <td id="T_eb673_row4_col15" class="data row4 col15" >30.208500</td>
      <td id="T_eb673_row4_col16" class="data row4 col16" >5.300000</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<ul class="simple">
<li><p>Añadir una columna de mes, día y día de la semana</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;month&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">supermarket_df</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span>
<span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;day&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">supermarket_df</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">day</span>
<span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;weekday&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">supermarket_df</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">day_name</span><span class="p">()</span>

<span class="n">supermarket_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;GnBu&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_58c0a_row0_col6 {
  background-color: #1272b1;
  color: #f1f1f1;
}
#T_58c0a_row0_col7, #T_58c0a_row2_col7, #T_58c0a_row4_col7 {
  background-color: #42a6cc;
  color: #f1f1f1;
}
#T_58c0a_row0_col8, #T_58c0a_row0_col9, #T_58c0a_row0_col13, #T_58c0a_row0_col15 {
  background-color: #1070b0;
  color: #f1f1f1;
}
#T_58c0a_row0_col14, #T_58c0a_row0_col17, #T_58c0a_row1_col6, #T_58c0a_row1_col7, #T_58c0a_row1_col8, #T_58c0a_row1_col9, #T_58c0a_row1_col13, #T_58c0a_row1_col14, #T_58c0a_row1_col15, #T_58c0a_row2_col14, #T_58c0a_row2_col18, #T_58c0a_row3_col14, #T_58c0a_row3_col17, #T_58c0a_row4_col14, #T_58c0a_row4_col16 {
  background-color: #f7fcf0;
  color: #000000;
}
#T_58c0a_row0_col16 {
  background-color: #0864a8;
  color: #f1f1f1;
}
#T_58c0a_row0_col18 {
  background-color: #e8f6e2;
  color: #000000;
}
#T_58c0a_row1_col16, #T_58c0a_row1_col17, #T_58c0a_row2_col17, #T_58c0a_row3_col7, #T_58c0a_row3_col18, #T_58c0a_row4_col6, #T_58c0a_row4_col8, #T_58c0a_row4_col9, #T_58c0a_row4_col13, #T_58c0a_row4_col15 {
  background-color: #084081;
  color: #f1f1f1;
}
#T_58c0a_row1_col18, #T_58c0a_row4_col18 {
  background-color: #d3eecc;
  color: #000000;
}
#T_58c0a_row2_col6 {
  background-color: #92d5bc;
  color: #000000;
}
#T_58c0a_row2_col8, #T_58c0a_row2_col9, #T_58c0a_row2_col13, #T_58c0a_row2_col15 {
  background-color: #86d0c0;
  color: #000000;
}
#T_58c0a_row2_col16 {
  background-color: #7fcdc3;
  color: #000000;
}
#T_58c0a_row3_col6 {
  background-color: #56b7d0;
  color: #f1f1f1;
}
#T_58c0a_row3_col8, #T_58c0a_row3_col9, #T_58c0a_row3_col13, #T_58c0a_row3_col15 {
  background-color: #2f90c0;
  color: #f1f1f1;
}
#T_58c0a_row3_col16 {
  background-color: #3395c3;
  color: #f1f1f1;
}
#T_58c0a_row4_col17 {
  background-color: #7accc4;
  color: #000000;
}
</style>
<table id="T_58c0a">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_58c0a_level0_col0" class="col_heading level0 col0" >Invoice ID</th>
      <th id="T_58c0a_level0_col1" class="col_heading level0 col1" >Branch</th>
      <th id="T_58c0a_level0_col2" class="col_heading level0 col2" >City</th>
      <th id="T_58c0a_level0_col3" class="col_heading level0 col3" >Customer type</th>
      <th id="T_58c0a_level0_col4" class="col_heading level0 col4" >Gender</th>
      <th id="T_58c0a_level0_col5" class="col_heading level0 col5" >Product line</th>
      <th id="T_58c0a_level0_col6" class="col_heading level0 col6" >Unit price</th>
      <th id="T_58c0a_level0_col7" class="col_heading level0 col7" >Quantity</th>
      <th id="T_58c0a_level0_col8" class="col_heading level0 col8" >Tax 5%</th>
      <th id="T_58c0a_level0_col9" class="col_heading level0 col9" >Total</th>
      <th id="T_58c0a_level0_col10" class="col_heading level0 col10" >Date</th>
      <th id="T_58c0a_level0_col11" class="col_heading level0 col11" >Time</th>
      <th id="T_58c0a_level0_col12" class="col_heading level0 col12" >Payment</th>
      <th id="T_58c0a_level0_col13" class="col_heading level0 col13" >cogs</th>
      <th id="T_58c0a_level0_col14" class="col_heading level0 col14" >gross margin percentage</th>
      <th id="T_58c0a_level0_col15" class="col_heading level0 col15" >gross income</th>
      <th id="T_58c0a_level0_col16" class="col_heading level0 col16" >Rating</th>
      <th id="T_58c0a_level0_col17" class="col_heading level0 col17" >month</th>
      <th id="T_58c0a_level0_col18" class="col_heading level0 col18" >day</th>
      <th id="T_58c0a_level0_col19" class="col_heading level0 col19" >weekday</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_58c0a_level0_row0" class="row_heading level0 row0" >0</th>
      <td id="T_58c0a_row0_col0" class="data row0 col0" >750-67-8428</td>
      <td id="T_58c0a_row0_col1" class="data row0 col1" >A</td>
      <td id="T_58c0a_row0_col2" class="data row0 col2" >Yangon</td>
      <td id="T_58c0a_row0_col3" class="data row0 col3" >Member</td>
      <td id="T_58c0a_row0_col4" class="data row0 col4" >Female</td>
      <td id="T_58c0a_row0_col5" class="data row0 col5" >Health and beauty</td>
      <td id="T_58c0a_row0_col6" class="data row0 col6" >74.690000</td>
      <td id="T_58c0a_row0_col7" class="data row0 col7" >7</td>
      <td id="T_58c0a_row0_col8" class="data row0 col8" >26.141500</td>
      <td id="T_58c0a_row0_col9" class="data row0 col9" >548.971500</td>
      <td id="T_58c0a_row0_col10" class="data row0 col10" >2019-01-05 00:00:00</td>
      <td id="T_58c0a_row0_col11" class="data row0 col11" >13:08</td>
      <td id="T_58c0a_row0_col12" class="data row0 col12" >Ewallet</td>
      <td id="T_58c0a_row0_col13" class="data row0 col13" >522.830000</td>
      <td id="T_58c0a_row0_col14" class="data row0 col14" >4.761905</td>
      <td id="T_58c0a_row0_col15" class="data row0 col15" >26.141500</td>
      <td id="T_58c0a_row0_col16" class="data row0 col16" >9.100000</td>
      <td id="T_58c0a_row0_col17" class="data row0 col17" >1</td>
      <td id="T_58c0a_row0_col18" class="data row0 col18" >5</td>
      <td id="T_58c0a_row0_col19" class="data row0 col19" >Saturday</td>
    </tr>
    <tr>
      <th id="T_58c0a_level0_row1" class="row_heading level0 row1" >1</th>
      <td id="T_58c0a_row1_col0" class="data row1 col0" >226-31-3081</td>
      <td id="T_58c0a_row1_col1" class="data row1 col1" >C</td>
      <td id="T_58c0a_row1_col2" class="data row1 col2" >Naypyitaw</td>
      <td id="T_58c0a_row1_col3" class="data row1 col3" >Normal</td>
      <td id="T_58c0a_row1_col4" class="data row1 col4" >Female</td>
      <td id="T_58c0a_row1_col5" class="data row1 col5" >Electronic accessories</td>
      <td id="T_58c0a_row1_col6" class="data row1 col6" >15.280000</td>
      <td id="T_58c0a_row1_col7" class="data row1 col7" >5</td>
      <td id="T_58c0a_row1_col8" class="data row1 col8" >3.820000</td>
      <td id="T_58c0a_row1_col9" class="data row1 col9" >80.220000</td>
      <td id="T_58c0a_row1_col10" class="data row1 col10" >2019-03-08 00:00:00</td>
      <td id="T_58c0a_row1_col11" class="data row1 col11" >10:29</td>
      <td id="T_58c0a_row1_col12" class="data row1 col12" >Cash</td>
      <td id="T_58c0a_row1_col13" class="data row1 col13" >76.400000</td>
      <td id="T_58c0a_row1_col14" class="data row1 col14" >4.761905</td>
      <td id="T_58c0a_row1_col15" class="data row1 col15" >3.820000</td>
      <td id="T_58c0a_row1_col16" class="data row1 col16" >9.600000</td>
      <td id="T_58c0a_row1_col17" class="data row1 col17" >3</td>
      <td id="T_58c0a_row1_col18" class="data row1 col18" >8</td>
      <td id="T_58c0a_row1_col19" class="data row1 col19" >Friday</td>
    </tr>
    <tr>
      <th id="T_58c0a_level0_row2" class="row_heading level0 row2" >2</th>
      <td id="T_58c0a_row2_col0" class="data row2 col0" >631-41-3108</td>
      <td id="T_58c0a_row2_col1" class="data row2 col1" >A</td>
      <td id="T_58c0a_row2_col2" class="data row2 col2" >Yangon</td>
      <td id="T_58c0a_row2_col3" class="data row2 col3" >Normal</td>
      <td id="T_58c0a_row2_col4" class="data row2 col4" >Male</td>
      <td id="T_58c0a_row2_col5" class="data row2 col5" >Home and lifestyle</td>
      <td id="T_58c0a_row2_col6" class="data row2 col6" >46.330000</td>
      <td id="T_58c0a_row2_col7" class="data row2 col7" >7</td>
      <td id="T_58c0a_row2_col8" class="data row2 col8" >16.215500</td>
      <td id="T_58c0a_row2_col9" class="data row2 col9" >340.525500</td>
      <td id="T_58c0a_row2_col10" class="data row2 col10" >2019-03-03 00:00:00</td>
      <td id="T_58c0a_row2_col11" class="data row2 col11" >13:23</td>
      <td id="T_58c0a_row2_col12" class="data row2 col12" >Credit card</td>
      <td id="T_58c0a_row2_col13" class="data row2 col13" >324.310000</td>
      <td id="T_58c0a_row2_col14" class="data row2 col14" >4.761905</td>
      <td id="T_58c0a_row2_col15" class="data row2 col15" >16.215500</td>
      <td id="T_58c0a_row2_col16" class="data row2 col16" >7.400000</td>
      <td id="T_58c0a_row2_col17" class="data row2 col17" >3</td>
      <td id="T_58c0a_row2_col18" class="data row2 col18" >3</td>
      <td id="T_58c0a_row2_col19" class="data row2 col19" >Sunday</td>
    </tr>
    <tr>
      <th id="T_58c0a_level0_row3" class="row_heading level0 row3" >3</th>
      <td id="T_58c0a_row3_col0" class="data row3 col0" >123-19-1176</td>
      <td id="T_58c0a_row3_col1" class="data row3 col1" >A</td>
      <td id="T_58c0a_row3_col2" class="data row3 col2" >Yangon</td>
      <td id="T_58c0a_row3_col3" class="data row3 col3" >Member</td>
      <td id="T_58c0a_row3_col4" class="data row3 col4" >Male</td>
      <td id="T_58c0a_row3_col5" class="data row3 col5" >Health and beauty</td>
      <td id="T_58c0a_row3_col6" class="data row3 col6" >58.220000</td>
      <td id="T_58c0a_row3_col7" class="data row3 col7" >8</td>
      <td id="T_58c0a_row3_col8" class="data row3 col8" >23.288000</td>
      <td id="T_58c0a_row3_col9" class="data row3 col9" >489.048000</td>
      <td id="T_58c0a_row3_col10" class="data row3 col10" >2019-01-27 00:00:00</td>
      <td id="T_58c0a_row3_col11" class="data row3 col11" >20:33</td>
      <td id="T_58c0a_row3_col12" class="data row3 col12" >Ewallet</td>
      <td id="T_58c0a_row3_col13" class="data row3 col13" >465.760000</td>
      <td id="T_58c0a_row3_col14" class="data row3 col14" >4.761905</td>
      <td id="T_58c0a_row3_col15" class="data row3 col15" >23.288000</td>
      <td id="T_58c0a_row3_col16" class="data row3 col16" >8.400000</td>
      <td id="T_58c0a_row3_col17" class="data row3 col17" >1</td>
      <td id="T_58c0a_row3_col18" class="data row3 col18" >27</td>
      <td id="T_58c0a_row3_col19" class="data row3 col19" >Sunday</td>
    </tr>
    <tr>
      <th id="T_58c0a_level0_row4" class="row_heading level0 row4" >4</th>
      <td id="T_58c0a_row4_col0" class="data row4 col0" >373-73-7910</td>
      <td id="T_58c0a_row4_col1" class="data row4 col1" >A</td>
      <td id="T_58c0a_row4_col2" class="data row4 col2" >Yangon</td>
      <td id="T_58c0a_row4_col3" class="data row4 col3" >Normal</td>
      <td id="T_58c0a_row4_col4" class="data row4 col4" >Male</td>
      <td id="T_58c0a_row4_col5" class="data row4 col5" >Sports and travel</td>
      <td id="T_58c0a_row4_col6" class="data row4 col6" >86.310000</td>
      <td id="T_58c0a_row4_col7" class="data row4 col7" >7</td>
      <td id="T_58c0a_row4_col8" class="data row4 col8" >30.208500</td>
      <td id="T_58c0a_row4_col9" class="data row4 col9" >634.378500</td>
      <td id="T_58c0a_row4_col10" class="data row4 col10" >2019-02-08 00:00:00</td>
      <td id="T_58c0a_row4_col11" class="data row4 col11" >10:37</td>
      <td id="T_58c0a_row4_col12" class="data row4 col12" >Ewallet</td>
      <td id="T_58c0a_row4_col13" class="data row4 col13" >604.170000</td>
      <td id="T_58c0a_row4_col14" class="data row4 col14" >4.761905</td>
      <td id="T_58c0a_row4_col15" class="data row4 col15" >30.208500</td>
      <td id="T_58c0a_row4_col16" class="data row4 col16" >5.300000</td>
      <td id="T_58c0a_row4_col17" class="data row4 col17" >2</td>
      <td id="T_58c0a_row4_col18" class="data row4 col18" >8</td>
      <td id="T_58c0a_row4_col19" class="data row4 col19" >Friday</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<ul class="simple">
<li><p>Añadimos una columna de horas y minutos</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;hour&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">supermarket_df</span><span class="o">.</span><span class="n">Time</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;minute&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">supermarket_df</span><span class="o">.</span><span class="n">Time</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>

<span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;hour&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;hour&#39;</span><span class="p">])</span>
<span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;minute&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;minute&#39;</span><span class="p">])</span>

<span class="n">supermarket_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;GnBu&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_ec860_row0_col6 {
  background-color: #1272b1;
  color: #f1f1f1;
}
#T_ec860_row0_col7, #T_ec860_row2_col7, #T_ec860_row4_col7 {
  background-color: #42a6cc;
  color: #f1f1f1;
}
#T_ec860_row0_col8, #T_ec860_row0_col9, #T_ec860_row0_col13, #T_ec860_row0_col15 {
  background-color: #1070b0;
  color: #f1f1f1;
}
#T_ec860_row0_col14, #T_ec860_row0_col17, #T_ec860_row0_col21, #T_ec860_row1_col6, #T_ec860_row1_col7, #T_ec860_row1_col8, #T_ec860_row1_col9, #T_ec860_row1_col13, #T_ec860_row1_col14, #T_ec860_row1_col15, #T_ec860_row1_col20, #T_ec860_row2_col14, #T_ec860_row2_col18, #T_ec860_row3_col14, #T_ec860_row3_col17, #T_ec860_row4_col14, #T_ec860_row4_col16, #T_ec860_row4_col20 {
  background-color: #f7fcf0;
  color: #000000;
}
#T_ec860_row0_col16 {
  background-color: #0864a8;
  color: #f1f1f1;
}
#T_ec860_row0_col18 {
  background-color: #e8f6e2;
  color: #000000;
}
#T_ec860_row0_col20, #T_ec860_row2_col20 {
  background-color: #bee6bf;
  color: #000000;
}
#T_ec860_row1_col16, #T_ec860_row1_col17, #T_ec860_row2_col17, #T_ec860_row3_col7, #T_ec860_row3_col18, #T_ec860_row3_col20, #T_ec860_row4_col6, #T_ec860_row4_col8, #T_ec860_row4_col9, #T_ec860_row4_col13, #T_ec860_row4_col15, #T_ec860_row4_col21 {
  background-color: #084081;
  color: #f1f1f1;
}
#T_ec860_row1_col18, #T_ec860_row4_col18 {
  background-color: #d3eecc;
  color: #000000;
}
#T_ec860_row1_col21 {
  background-color: #3294c2;
  color: #f1f1f1;
}
#T_ec860_row2_col6 {
  background-color: #92d5bc;
  color: #000000;
}
#T_ec860_row2_col8, #T_ec860_row2_col9, #T_ec860_row2_col13, #T_ec860_row2_col15 {
  background-color: #86d0c0;
  color: #000000;
}
#T_ec860_row2_col16 {
  background-color: #7fcdc3;
  color: #000000;
}
#T_ec860_row2_col21 {
  background-color: #75c8c6;
  color: #000000;
}
#T_ec860_row3_col6 {
  background-color: #56b7d0;
  color: #f1f1f1;
}
#T_ec860_row3_col8, #T_ec860_row3_col9, #T_ec860_row3_col13, #T_ec860_row3_col15 {
  background-color: #2f90c0;
  color: #f1f1f1;
}
#T_ec860_row3_col16 {
  background-color: #3395c3;
  color: #f1f1f1;
}
#T_ec860_row3_col21 {
  background-color: #0b6cae;
  color: #f1f1f1;
}
#T_ec860_row4_col17 {
  background-color: #7accc4;
  color: #000000;
}
</style>
<table id="T_ec860">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_ec860_level0_col0" class="col_heading level0 col0" >Invoice ID</th>
      <th id="T_ec860_level0_col1" class="col_heading level0 col1" >Branch</th>
      <th id="T_ec860_level0_col2" class="col_heading level0 col2" >City</th>
      <th id="T_ec860_level0_col3" class="col_heading level0 col3" >Customer type</th>
      <th id="T_ec860_level0_col4" class="col_heading level0 col4" >Gender</th>
      <th id="T_ec860_level0_col5" class="col_heading level0 col5" >Product line</th>
      <th id="T_ec860_level0_col6" class="col_heading level0 col6" >Unit price</th>
      <th id="T_ec860_level0_col7" class="col_heading level0 col7" >Quantity</th>
      <th id="T_ec860_level0_col8" class="col_heading level0 col8" >Tax 5%</th>
      <th id="T_ec860_level0_col9" class="col_heading level0 col9" >Total</th>
      <th id="T_ec860_level0_col10" class="col_heading level0 col10" >Date</th>
      <th id="T_ec860_level0_col11" class="col_heading level0 col11" >Time</th>
      <th id="T_ec860_level0_col12" class="col_heading level0 col12" >Payment</th>
      <th id="T_ec860_level0_col13" class="col_heading level0 col13" >cogs</th>
      <th id="T_ec860_level0_col14" class="col_heading level0 col14" >gross margin percentage</th>
      <th id="T_ec860_level0_col15" class="col_heading level0 col15" >gross income</th>
      <th id="T_ec860_level0_col16" class="col_heading level0 col16" >Rating</th>
      <th id="T_ec860_level0_col17" class="col_heading level0 col17" >month</th>
      <th id="T_ec860_level0_col18" class="col_heading level0 col18" >day</th>
      <th id="T_ec860_level0_col19" class="col_heading level0 col19" >weekday</th>
      <th id="T_ec860_level0_col20" class="col_heading level0 col20" >hour</th>
      <th id="T_ec860_level0_col21" class="col_heading level0 col21" >minute</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_ec860_level0_row0" class="row_heading level0 row0" >0</th>
      <td id="T_ec860_row0_col0" class="data row0 col0" >750-67-8428</td>
      <td id="T_ec860_row0_col1" class="data row0 col1" >A</td>
      <td id="T_ec860_row0_col2" class="data row0 col2" >Yangon</td>
      <td id="T_ec860_row0_col3" class="data row0 col3" >Member</td>
      <td id="T_ec860_row0_col4" class="data row0 col4" >Female</td>
      <td id="T_ec860_row0_col5" class="data row0 col5" >Health and beauty</td>
      <td id="T_ec860_row0_col6" class="data row0 col6" >74.690000</td>
      <td id="T_ec860_row0_col7" class="data row0 col7" >7</td>
      <td id="T_ec860_row0_col8" class="data row0 col8" >26.141500</td>
      <td id="T_ec860_row0_col9" class="data row0 col9" >548.971500</td>
      <td id="T_ec860_row0_col10" class="data row0 col10" >2019-01-05 00:00:00</td>
      <td id="T_ec860_row0_col11" class="data row0 col11" >13:08</td>
      <td id="T_ec860_row0_col12" class="data row0 col12" >Ewallet</td>
      <td id="T_ec860_row0_col13" class="data row0 col13" >522.830000</td>
      <td id="T_ec860_row0_col14" class="data row0 col14" >4.761905</td>
      <td id="T_ec860_row0_col15" class="data row0 col15" >26.141500</td>
      <td id="T_ec860_row0_col16" class="data row0 col16" >9.100000</td>
      <td id="T_ec860_row0_col17" class="data row0 col17" >1</td>
      <td id="T_ec860_row0_col18" class="data row0 col18" >5</td>
      <td id="T_ec860_row0_col19" class="data row0 col19" >Saturday</td>
      <td id="T_ec860_row0_col20" class="data row0 col20" >13</td>
      <td id="T_ec860_row0_col21" class="data row0 col21" >8</td>
    </tr>
    <tr>
      <th id="T_ec860_level0_row1" class="row_heading level0 row1" >1</th>
      <td id="T_ec860_row1_col0" class="data row1 col0" >226-31-3081</td>
      <td id="T_ec860_row1_col1" class="data row1 col1" >C</td>
      <td id="T_ec860_row1_col2" class="data row1 col2" >Naypyitaw</td>
      <td id="T_ec860_row1_col3" class="data row1 col3" >Normal</td>
      <td id="T_ec860_row1_col4" class="data row1 col4" >Female</td>
      <td id="T_ec860_row1_col5" class="data row1 col5" >Electronic accessories</td>
      <td id="T_ec860_row1_col6" class="data row1 col6" >15.280000</td>
      <td id="T_ec860_row1_col7" class="data row1 col7" >5</td>
      <td id="T_ec860_row1_col8" class="data row1 col8" >3.820000</td>
      <td id="T_ec860_row1_col9" class="data row1 col9" >80.220000</td>
      <td id="T_ec860_row1_col10" class="data row1 col10" >2019-03-08 00:00:00</td>
      <td id="T_ec860_row1_col11" class="data row1 col11" >10:29</td>
      <td id="T_ec860_row1_col12" class="data row1 col12" >Cash</td>
      <td id="T_ec860_row1_col13" class="data row1 col13" >76.400000</td>
      <td id="T_ec860_row1_col14" class="data row1 col14" >4.761905</td>
      <td id="T_ec860_row1_col15" class="data row1 col15" >3.820000</td>
      <td id="T_ec860_row1_col16" class="data row1 col16" >9.600000</td>
      <td id="T_ec860_row1_col17" class="data row1 col17" >3</td>
      <td id="T_ec860_row1_col18" class="data row1 col18" >8</td>
      <td id="T_ec860_row1_col19" class="data row1 col19" >Friday</td>
      <td id="T_ec860_row1_col20" class="data row1 col20" >10</td>
      <td id="T_ec860_row1_col21" class="data row1 col21" >29</td>
    </tr>
    <tr>
      <th id="T_ec860_level0_row2" class="row_heading level0 row2" >2</th>
      <td id="T_ec860_row2_col0" class="data row2 col0" >631-41-3108</td>
      <td id="T_ec860_row2_col1" class="data row2 col1" >A</td>
      <td id="T_ec860_row2_col2" class="data row2 col2" >Yangon</td>
      <td id="T_ec860_row2_col3" class="data row2 col3" >Normal</td>
      <td id="T_ec860_row2_col4" class="data row2 col4" >Male</td>
      <td id="T_ec860_row2_col5" class="data row2 col5" >Home and lifestyle</td>
      <td id="T_ec860_row2_col6" class="data row2 col6" >46.330000</td>
      <td id="T_ec860_row2_col7" class="data row2 col7" >7</td>
      <td id="T_ec860_row2_col8" class="data row2 col8" >16.215500</td>
      <td id="T_ec860_row2_col9" class="data row2 col9" >340.525500</td>
      <td id="T_ec860_row2_col10" class="data row2 col10" >2019-03-03 00:00:00</td>
      <td id="T_ec860_row2_col11" class="data row2 col11" >13:23</td>
      <td id="T_ec860_row2_col12" class="data row2 col12" >Credit card</td>
      <td id="T_ec860_row2_col13" class="data row2 col13" >324.310000</td>
      <td id="T_ec860_row2_col14" class="data row2 col14" >4.761905</td>
      <td id="T_ec860_row2_col15" class="data row2 col15" >16.215500</td>
      <td id="T_ec860_row2_col16" class="data row2 col16" >7.400000</td>
      <td id="T_ec860_row2_col17" class="data row2 col17" >3</td>
      <td id="T_ec860_row2_col18" class="data row2 col18" >3</td>
      <td id="T_ec860_row2_col19" class="data row2 col19" >Sunday</td>
      <td id="T_ec860_row2_col20" class="data row2 col20" >13</td>
      <td id="T_ec860_row2_col21" class="data row2 col21" >23</td>
    </tr>
    <tr>
      <th id="T_ec860_level0_row3" class="row_heading level0 row3" >3</th>
      <td id="T_ec860_row3_col0" class="data row3 col0" >123-19-1176</td>
      <td id="T_ec860_row3_col1" class="data row3 col1" >A</td>
      <td id="T_ec860_row3_col2" class="data row3 col2" >Yangon</td>
      <td id="T_ec860_row3_col3" class="data row3 col3" >Member</td>
      <td id="T_ec860_row3_col4" class="data row3 col4" >Male</td>
      <td id="T_ec860_row3_col5" class="data row3 col5" >Health and beauty</td>
      <td id="T_ec860_row3_col6" class="data row3 col6" >58.220000</td>
      <td id="T_ec860_row3_col7" class="data row3 col7" >8</td>
      <td id="T_ec860_row3_col8" class="data row3 col8" >23.288000</td>
      <td id="T_ec860_row3_col9" class="data row3 col9" >489.048000</td>
      <td id="T_ec860_row3_col10" class="data row3 col10" >2019-01-27 00:00:00</td>
      <td id="T_ec860_row3_col11" class="data row3 col11" >20:33</td>
      <td id="T_ec860_row3_col12" class="data row3 col12" >Ewallet</td>
      <td id="T_ec860_row3_col13" class="data row3 col13" >465.760000</td>
      <td id="T_ec860_row3_col14" class="data row3 col14" >4.761905</td>
      <td id="T_ec860_row3_col15" class="data row3 col15" >23.288000</td>
      <td id="T_ec860_row3_col16" class="data row3 col16" >8.400000</td>
      <td id="T_ec860_row3_col17" class="data row3 col17" >1</td>
      <td id="T_ec860_row3_col18" class="data row3 col18" >27</td>
      <td id="T_ec860_row3_col19" class="data row3 col19" >Sunday</td>
      <td id="T_ec860_row3_col20" class="data row3 col20" >20</td>
      <td id="T_ec860_row3_col21" class="data row3 col21" >33</td>
    </tr>
    <tr>
      <th id="T_ec860_level0_row4" class="row_heading level0 row4" >4</th>
      <td id="T_ec860_row4_col0" class="data row4 col0" >373-73-7910</td>
      <td id="T_ec860_row4_col1" class="data row4 col1" >A</td>
      <td id="T_ec860_row4_col2" class="data row4 col2" >Yangon</td>
      <td id="T_ec860_row4_col3" class="data row4 col3" >Normal</td>
      <td id="T_ec860_row4_col4" class="data row4 col4" >Male</td>
      <td id="T_ec860_row4_col5" class="data row4 col5" >Sports and travel</td>
      <td id="T_ec860_row4_col6" class="data row4 col6" >86.310000</td>
      <td id="T_ec860_row4_col7" class="data row4 col7" >7</td>
      <td id="T_ec860_row4_col8" class="data row4 col8" >30.208500</td>
      <td id="T_ec860_row4_col9" class="data row4 col9" >634.378500</td>
      <td id="T_ec860_row4_col10" class="data row4 col10" >2019-02-08 00:00:00</td>
      <td id="T_ec860_row4_col11" class="data row4 col11" >10:37</td>
      <td id="T_ec860_row4_col12" class="data row4 col12" >Ewallet</td>
      <td id="T_ec860_row4_col13" class="data row4 col13" >604.170000</td>
      <td id="T_ec860_row4_col14" class="data row4 col14" >4.761905</td>
      <td id="T_ec860_row4_col15" class="data row4 col15" >30.208500</td>
      <td id="T_ec860_row4_col16" class="data row4 col16" >5.300000</td>
      <td id="T_ec860_row4_col17" class="data row4 col17" >2</td>
      <td id="T_ec860_row4_col18" class="data row4 col18" >8</td>
      <td id="T_ec860_row4_col19" class="data row4 col19" >Friday</td>
      <td id="T_ec860_row4_col20" class="data row4 col20" >10</td>
      <td id="T_ec860_row4_col21" class="data row4 col21" >37</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<ul class="simple">
<li><p>Busqueda de patrones importantes</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cities</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;city&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Yangon&#39;</span><span class="p">,</span> <span class="s1">&#39;Naypyitaw&#39;</span><span class="p">,</span> <span class="s1">&#39;Mandalay&#39;</span><span class="p">],</span>
                       <span class="s1">&#39;Latitude&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">16.8409</span><span class="p">,</span><span class="mf">19.7633</span><span class="p">,</span><span class="mf">21.9588</span><span class="p">],</span>
                       <span class="s1">&#39;Longitude&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="mf">96.1735</span><span class="p">,</span> <span class="mf">96.0785</span><span class="p">,</span> <span class="mf">96.0891</span><span class="p">]})</span>

<span class="n">market_map</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">location</span> <span class="o">=</span> <span class="p">[</span><span class="mf">21.9162</span><span class="p">,</span><span class="mf">95.9560</span><span class="p">],</span> <span class="n">zoom_start</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">tiles</span> <span class="o">=</span> <span class="s1">&#39;CartoDB Positron&#39;</span><span class="p">,</span> <span class="n">control_scale</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="mi">600</span><span class="p">));</span>

<span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="ow">in</span> <span class="n">cities</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
  <span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span> <span class="o">=</span> <span class="p">[</span><span class="n">j</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;Latitude&#39;</span><span class="p">],</span> <span class="n">j</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;Longitude&#39;</span><span class="p">]],</span> <span class="n">popup</span> <span class="o">=</span> <span class="n">j</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;city&#39;</span><span class="p">],</span><span class="n">tooltip</span> <span class="o">=</span> <span class="s1">&#39;click&#39;</span><span class="p">,</span>
                <span class="n">icon</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">icon</span> <span class="o">=</span> <span class="s1">&#39;glyphicon-shopping-cart&#39;</span><span class="p">,</span> <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;glyphicon&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">market_map</span><span class="p">)</span>

<span class="n">market_map</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;head&gt;    
    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;

        &lt;script&gt;
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        &lt;/script&gt;

    &lt;style&gt;html, body {width: 100%;height: 100%;margin: 0;padding: 0;}&lt;/style&gt;
    &lt;style&gt;#map {position:absolute;top:0;bottom:0;right:0;left:0;}&lt;/style&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-1.12.4.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;

            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;
            &lt;style&gt;
                #map_d5c5ada10888664cd921642c40154cd3 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
            &lt;/style&gt;

&lt;/head&gt;
&lt;body&gt;    

            &lt;div class=&quot;folium-map&quot; id=&quot;map_d5c5ada10888664cd921642c40154cd3&quot; &gt;&lt;/div&gt;

&lt;/body&gt;
&lt;script&gt;    

            var map_d5c5ada10888664cd921642c40154cd3 = L.map(
                &quot;map_d5c5ada10888664cd921642c40154cd3&quot;,
                {
                    center: [21.9162, 95.956],
                    crs: L.CRS.EPSG3857,
                    zoom: 5,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );
            L.control.scale().addTo(map_d5c5ada10888664cd921642c40154cd3);





            var tile_layer_78700e6fd676ba54be654b55243de15d = L.tileLayer(
                &quot;https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png&quot;,
                {&quot;attribution&quot;: &quot;\u0026copy; \u003ca href=\&quot;http://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors \u0026copy; \u003ca href=\&quot;http://cartodb.com/attributions\&quot;\u003eCartoDB\u003c/a\u003e, CartoDB \u003ca href =\&quot;http://cartodb.com/attributions\&quot;\u003eattributions\u003c/a\u003e&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 18, &quot;maxZoom&quot;: 18, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            ).addTo(map_d5c5ada10888664cd921642c40154cd3);


            var marker_12a3ae4d586a25040c6a540515ec0662 = L.marker(
                [16.8409, 96.1735],
                {}
            ).addTo(map_d5c5ada10888664cd921642c40154cd3);


            var icon_8695089c5483d509b07bce22811bdbe4 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;glyphicon-shopping-cart&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_12a3ae4d586a25040c6a540515ec0662.setIcon(icon_8695089c5483d509b07bce22811bdbe4);


        var popup_33dcb29164d36e5e87b5a20a49bf3f9c = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});


            var html_41cf73f080380645519c8fff0ac48228 = $(`&lt;div id=&quot;html_41cf73f080380645519c8fff0ac48228&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Yangon&lt;/div&gt;`)[0];
            popup_33dcb29164d36e5e87b5a20a49bf3f9c.setContent(html_41cf73f080380645519c8fff0ac48228);


        marker_12a3ae4d586a25040c6a540515ec0662.bindPopup(popup_33dcb29164d36e5e87b5a20a49bf3f9c)
        ;




            marker_12a3ae4d586a25040c6a540515ec0662.bindTooltip(
                `&lt;div&gt;
                     click
                 &lt;/div&gt;`,
                {&quot;sticky&quot;: true}
            );


            var marker_291bd5b4ff6c02287d3984375979fe87 = L.marker(
                [19.7633, 96.0785],
                {}
            ).addTo(map_d5c5ada10888664cd921642c40154cd3);


            var icon_2b5d1fdd8e393e5c0df16aa2b36c9c07 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;glyphicon-shopping-cart&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_291bd5b4ff6c02287d3984375979fe87.setIcon(icon_2b5d1fdd8e393e5c0df16aa2b36c9c07);


        var popup_aeb998bc1c68e5e8321fc88882775068 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});


            var html_53fc29b8235f4954f6a7c54a57d093f7 = $(`&lt;div id=&quot;html_53fc29b8235f4954f6a7c54a57d093f7&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Naypyitaw&lt;/div&gt;`)[0];
            popup_aeb998bc1c68e5e8321fc88882775068.setContent(html_53fc29b8235f4954f6a7c54a57d093f7);


        marker_291bd5b4ff6c02287d3984375979fe87.bindPopup(popup_aeb998bc1c68e5e8321fc88882775068)
        ;




            marker_291bd5b4ff6c02287d3984375979fe87.bindTooltip(
                `&lt;div&gt;
                     click
                 &lt;/div&gt;`,
                {&quot;sticky&quot;: true}
            );


            var marker_8f6765d9eff36aebc4f0a83a0877d9f7 = L.marker(
                [21.9588, 96.0891],
                {}
            ).addTo(map_d5c5ada10888664cd921642c40154cd3);


            var icon_34274793d8300dfe000628e8c40b018f = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;glyphicon-shopping-cart&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_8f6765d9eff36aebc4f0a83a0877d9f7.setIcon(icon_34274793d8300dfe000628e8c40b018f);


        var popup_99c017ee2fa1e16c8837615f724997a6 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});


            var html_441913cd7c16623cae7e7fe399f2433d = $(`&lt;div id=&quot;html_441913cd7c16623cae7e7fe399f2433d&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Mandalay&lt;/div&gt;`)[0];
            popup_99c017ee2fa1e16c8837615f724997a6.setContent(html_441913cd7c16623cae7e7fe399f2433d);


        marker_8f6765d9eff36aebc4f0a83a0877d9f7.bindPopup(popup_99c017ee2fa1e16c8837615f724997a6)
        ;




            marker_8f6765d9eff36aebc4f0a83a0877d9f7.bindTooltip(
                `&lt;div&gt;
                     click
                 &lt;/div&gt;`,
                {&quot;sticky&quot;: true}
            );

&lt;/script&gt;" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div></div><div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 57600x43200 with 0 Axes&gt;
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Realizamos un <code class="docutils literal notranslate"><span class="pre">diagrama</span> <span class="pre">de</span> <span class="pre">barras</span></code>, donde las categorías coressponden a cada país y sus frecuencias la suma total de supermercados en cada uno de estos</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sale</span> <span class="o">=</span> <span class="n">supermarket_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;City&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()[</span><span class="s1">&#39;Total&#39;</span><span class="p">]</span>
<span class="n">cities</span> <span class="o">=</span> <span class="p">[</span><span class="n">city</span> <span class="k">for</span> <span class="n">city</span><span class="p">,</span> <span class="n">supermarket_df</span> <span class="ow">in</span> <span class="n">supermarket_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;City&#39;</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">cities</span><span class="p">,</span> <span class="n">sale</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">.6</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Cities&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Sales&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Highest Sale per city&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/bayes_theorem_63_0.png" src="_images/bayes_theorem_63_0.png" />
</div>
</div>
<ul class="simple">
<li><p>Nótese que Naypitaw tiene el mayor número de ventas, sin embargo, Mandalay y Yangon no están demasiado lejos de Naypitaw</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">Month</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sale</span> <span class="o">=</span> <span class="n">supermarket_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;month&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()[</span><span class="s1">&#39;Total&#39;</span><span class="p">]</span>
<span class="n">month</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;January&#39;</span><span class="p">,</span><span class="s1">&#39;February&#39;</span><span class="p">,</span><span class="s1">&#39;March&#39;</span><span class="p">]</span>
<span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;k&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">month</span><span class="p">,</span><span class="n">sale</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Number of Sales per Month&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/bayes_theorem_67_0.png" src="_images/bayes_theorem_67_0.png" />
</div>
</div>
<ul class="simple">
<li><p>El supermercado obtiene buenos resultados en enero. Tiene un descenso en las transacciones en febrero y se recupera en marzo</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">Quantity</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quantity</span> <span class="o">=</span> <span class="n">supermarket_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;month&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()[</span><span class="s1">&#39;Quantity&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Quantity of product by Month&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Month&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Quantity&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">month</span><span class="p">,</span><span class="n">quantity</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/bayes_theorem_71_0.png" src="_images/bayes_theorem_71_0.png" />
</div>
</div>
<ul class="simple">
<li><p>El gráfico de cantidades sigue un patrón similar al del gráfico de ventas. Tenemos una correlación entre el número de productos y el número de artículos vendidos.</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">Rating</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Rating Distribution by Branch&#39;</span><span class="p">);</span>
<span class="n">sns</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="s1">&#39;Branch&#39;</span><span class="p">,</span><span class="s1">&#39;Rating&#39;</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">supermarket_df</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/home/lihkir/PythonEnvs/data_challenge/lib/python3.8/site-packages/seaborn/_decorators.py:36: FutureWarning: Pass the following variables as keyword args: x, y. From version 0.12, the only valid positional argument will be `data`, and passing other arguments without an explicit keyword will result in an error or misinterpretation.
  warnings.warn(
</pre></div>
</div>
<img alt="_images/bayes_theorem_74_1.png" src="_images/bayes_theorem_74_1.png" />
</div>
</div>
<ul class="simple">
<li><p>La sucursal <span class="math notranslate nohighlight">\(A\)</span> ha recibido la calificación más positiva debido a la forma cónica hacia el centro entre los valores 6 a 9.</p></li>
<li><p>La sucursal <span class="math notranslate nohighlight">\(B\)</span> tiene la valoración más negativa debido a la forma cónica entre los valores 4 a 6.</p></li>
<li><p>La sucursal <span class="math notranslate nohighlight">\(C\)</span> tiene una valoración positiva y negativa casi igual entre los valores 4 a 6 y 8 a 10.</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">Payment</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">method</span><span class="o">=</span><span class="n">supermarket_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Payment&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()[</span><span class="s1">&#39;Total&#39;</span><span class="p">]</span>
<span class="n">payment</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Cash&#39;</span><span class="p">,</span><span class="s1">&#39;Credit card&#39;</span><span class="p">,</span><span class="s1">&#39;Ewallet&#39;</span><span class="p">]</span>
<span class="n">c</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;k&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">payment</span><span class="p">,</span><span class="n">method</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Type of Payment&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Count&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Method of Payment&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/bayes_theorem_78_0.png" src="_images/bayes_theorem_78_0.png" />
</div>
</div>
<ul class="simple">
<li><p>El efectivo es utilizado principalmente por los clientes en las sucursales</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">Hour</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Customer Transaction per Hour&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">supermarket_df</span><span class="p">,</span>
             <span class="n">x</span><span class="o">=</span><span class="s1">&#39;hour&#39;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;Total&#39;</span><span class="p">,</span>
             <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;Customer type&#39;</span><span class="p">,</span>
             <span class="n">markers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
             <span class="n">style</span><span class="o">=</span><span class="s1">&#39;Customer type&#39;</span><span class="p">,</span>
             <span class="n">dashes</span><span class="o">=</span><span class="kc">False</span><span class="p">);</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/bayes_theorem_81_0.png" src="_images/bayes_theorem_81_0.png" />
</div>
</div>
<ul class="simple">
<li><p>A los clientes normales y a los socios les gusta comprar hacia el mediodía, pero los socios realizan el mayor número de transacciones a las 14 horas. Hacia las 16.00 y las 21.00 horas, los clientes normales son los que más compran.</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">Correlation</span></code></strong></p>
<ul class="simple">
<li><p>Creamos primerlo una matriz de correlación</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">corr_df</span><span class="o">=</span><span class="n">supermarket_df</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">15</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Correlation Matrix&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">corr_df</span><span class="p">,</span><span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/bayes_theorem_86_0.png" src="_images/bayes_theorem_86_0.png" />
</div>
</div>
<ul class="simple">
<li><p>Las barras blancas representan los valores (porcentaje de margen bruto frente a porcentaje de margen bruto)</p></li>
<li><p>El color púrpura representa una correlación casi nula entre las columnas</p></li>
<li><p>El bloque naranja representa una alta correlación entre los valores. Así, <code class="docutils literal notranslate"><span class="pre">taxes</span></code>, <code class="docutils literal notranslate"><span class="pre">Total</span></code>, y <code class="docutils literal notranslate"><span class="pre">cogs</span></code> están muy correlacionados con <code class="docutils literal notranslate"><span class="pre">Quantity</span></code> y <code class="docutils literal notranslate"><span class="pre">Unit</span> <span class="pre">price</span></code></p></li>
<li><p>El bloque más claro representa la perfecta correlación entre los valores de las mismas columnas.</p></li>
<li><p>Después de obtener una <code class="docutils literal notranslate"><span class="pre">insight</span></code> de los datos, podríamos empezar a plantear algunas preguntas</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">Q1:</span> <span class="pre">¿Cuál</span> <span class="pre">fue</span> <span class="pre">el</span> <span class="pre">número</span> <span class="pre">total</span> <span class="pre">de</span> <span class="pre">ventas?</span> <span class="pre">¿Qué</span> <span class="pre">sucursal</span> <span class="pre">tiene</span> <span class="pre">el</span> <span class="pre">mayor</span> <span class="pre">número</span> <span class="pre">de</span> <span class="pre">ventas?</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sale_branch</span><span class="o">=</span><span class="n">supermarket_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Branch&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()[</span><span class="s1">&#39;Total&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Branch C has the highest number of sale of </span><span class="si">{}</span><span class="s1">$&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">sale_branch</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Branch C has the highest number of sale of 110568.7065$
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s1">&#39;darkgrid&#39;</span><span class="p">)</span>

<span class="n">branches</span> <span class="o">=</span> <span class="p">[</span><span class="n">branch</span> <span class="k">for</span> <span class="n">branch</span><span class="p">,</span> <span class="n">supermarket_df</span> <span class="ow">in</span> <span class="n">supermarket_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Branch&#39;</span><span class="p">)]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">branches</span><span class="p">,</span><span class="n">sale_branch</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Branches&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Sales&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;sale&#39;</span><span class="p">],</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/bayes_theorem_90_0.png" src="_images/bayes_theorem_90_0.png" />
</div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">Q2:</span> <span class="pre">¿Qué</span> <span class="pre">tipo</span> <span class="pre">de</span> <span class="pre">producto</span> <span class="pre">se</span> <span class="pre">vende</span> <span class="pre">más?</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sale_product</span><span class="o">=</span><span class="n">supermarket_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Product line&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()[</span><span class="s1">&#39;Total&#39;</span><span class="p">]</span>
<span class="n">products</span> <span class="o">=</span><span class="p">[</span><span class="n">product</span> <span class="k">for</span> <span class="n">product</span><span class="p">,</span> <span class="n">supermarket_df</span> <span class="ow">in</span> <span class="n">supermarket_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Product line&#39;</span><span class="p">)]</span>
<span class="n">c</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="s1">&#39;k&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">products</span><span class="p">,</span><span class="n">sale_product</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">products</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Products&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Sales&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;sale&#39;</span><span class="p">],</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper center&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/bayes_theorem_92_0.png" src="_images/bayes_theorem_92_0.png" />
</div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">Q3:</span> <span class="pre">¿Qué</span> <span class="pre">género</span> <span class="pre">compra</span> <span class="pre">más</span> <span class="pre">artículos</span> <span class="pre">en</span> <span class="pre">cada</span> <span class="pre">categoría?</span> <span class="pre">¿Cuál</span> <span class="pre">es</span> <span class="pre">la</span> <span class="pre">categoría?</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;male&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;Gender&#39;</span><span class="p">][</span><span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;Gender&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Male&#39;</span><span class="p">]</span>
<span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;female&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;Gender&#39;</span><span class="p">][</span><span class="n">supermarket_df</span><span class="o">.</span><span class="n">Gender</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Female&#39;</span><span class="p">)]</span>
<span class="n">product_gender</span><span class="o">=</span><span class="n">supermarket_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Product line&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="n">product_gender</span><span class="o">=</span><span class="n">product_gender</span><span class="p">[[</span><span class="s1">&#39;male&#39;</span><span class="p">,</span> <span class="s1">&#39;female&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">supermarket_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;male&#39;</span><span class="p">,</span><span class="s1">&#39;female&#39;</span><span class="p">],</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">product_gender</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>male</th>
      <th>female</th>
    </tr>
    <tr>
      <th>Product line</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Electronic accessories</th>
      <td>86</td>
      <td>84</td>
    </tr>
    <tr>
      <th>Fashion accessories</th>
      <td>82</td>
      <td>96</td>
    </tr>
    <tr>
      <th>Food and beverages</th>
      <td>84</td>
      <td>90</td>
    </tr>
    <tr>
      <th>Health and beauty</th>
      <td>88</td>
      <td>64</td>
    </tr>
    <tr>
      <th>Home and lifestyle</th>
      <td>81</td>
      <td>79</td>
    </tr>
    <tr>
      <th>Sports and travel</th>
      <td>78</td>
      <td>88</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Gender Purchase&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;Product line&#39;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;Total&#39;</span><span class="p">,</span><span class="n">hue</span><span class="o">=</span><span class="s1">&#39;Gender&#39;</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">supermarket_df</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">products</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/bayes_theorem_96_0.png" src="_images/bayes_theorem_96_0.png" />
</div>
</div>
<ul class="simple">
<li><p>Los hombres compran más productos en 3 categorías: <code class="docutils literal notranslate"><span class="pre">Electronic</span> <span class="pre">accessories</span></code>: 86 hombres, <code class="docutils literal notranslate"><span class="pre">Health</span> <span class="pre">and</span> <span class="pre">beauty</span></code>: 88 hombres, <code class="docutils literal notranslate"><span class="pre">Home</span> <span class="pre">and</span> <span class="pre">lifestyle</span></code>: 81 hombres.</p></li>
<li><p>Las mujeres compran más productos en 3 categorías: <code class="docutils literal notranslate"><span class="pre">Fashion</span> <span class="pre">accessories</span></code>: 96 mujeres, <code class="docutils literal notranslate"><span class="pre">Food</span> <span class="pre">and</span> <span class="pre">beverages</span></code>: 90 mujeres, <code class="docutils literal notranslate"><span class="pre">Sports</span> <span class="pre">and</span> <span class="pre">travel</span></code>: 88 mujeres</p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">Q4:</span> <span class="pre">¿Cuántas</span> <span class="pre">personas</span> <span class="pre">compran</span> <span class="pre">más</span> <span class="pre">que</span> <span class="pre">el</span> <span class="pre">precio</span> <span class="pre">medio</span> <span class="pre">en</span> <span class="pre">cada</span> <span class="pre">categoría?</span> <span class="pre">¿Son</span> <span class="pre">miembros</span> <span class="pre">del</span> <span class="pre">supermercado?</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mean_sale</span><span class="o">=</span><span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;Total&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">product_line</span><span class="o">=</span><span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;Product line&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The average sale of product is </span><span class="si">{:.3f}</span><span class="s1">$&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mean_sale</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The average sale of product is 322.967$
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">product_line</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([&#39;Health and beauty&#39;, &#39;Electronic accessories&#39;,
       &#39;Home and lifestyle&#39;, &#39;Sports and travel&#39;, &#39;Food and beverages&#39;,
       &#39;Fashion accessories&#39;], dtype=object)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">people</span><span class="o">=</span><span class="p">[]</span>

<span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="n">product_line</span><span class="p">:</span>
    <span class="n">p</span><span class="o">=</span><span class="n">supermarket_df</span><span class="p">[(</span><span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;Total&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="mf">322.96</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;Product line&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">product</span><span class="p">)]</span><span class="o">.</span><span class="n">count</span><span class="p">()[</span><span class="s1">&#39;Total&#39;</span><span class="p">]</span>
    <span class="n">people</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    
<span class="n">num_people</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">people</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_byproduct</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">product_line</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="n">people</span><span class="p">)),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Product line&#39;</span><span class="p">,</span><span class="s1">&#39;Total&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Product line&#39;</span><span class="p">)</span>
<span class="n">df_byproduct</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Total</th>
    </tr>
    <tr>
      <th>Product line</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Health and beauty</th>
      <td>60</td>
    </tr>
    <tr>
      <th>Electronic accessories</th>
      <td>67</td>
    </tr>
    <tr>
      <th>Home and lifestyle</th>
      <td>66</td>
    </tr>
    <tr>
      <th>Sports and travel</th>
      <td>75</td>
    </tr>
    <tr>
      <th>Food and beverages</th>
      <td>67</td>
    </tr>
    <tr>
      <th>Fashion accessories</th>
      <td>69</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Total de personas que compra más que el precio medio: &quot;</span><span class="p">,</span> <span class="n">num_people</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Total de personas que compra más que el precio medio:  404
</pre></div>
</div>
</div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">Q5:</span> <span class="pre">¿Cuál</span> <span class="pre">es</span> <span class="pre">el</span> <span class="pre">método</span> <span class="pre">de</span> <span class="pre">pago</span> <span class="pre">favorito</span> <span class="pre">de</span> <span class="pre">los</span> <span class="pre">socios?</span> <span class="pre">de</span> <span class="pre">los</span> <span class="pre">clientes</span> <span class="pre">normales?</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">method</span><span class="o">=</span><span class="n">supermarket_df</span><span class="p">[</span><span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;Customer type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;Normal&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Payment&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()[</span><span class="s1">&#39;Customer type&#39;</span><span class="p">]</span>
<span class="n">method</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Payment
Cash           176
Credit card    139
Ewallet        184
Name: Customer type, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">payment</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Cash&#39;</span><span class="p">,</span><span class="s1">&#39;Credit card&#39;</span><span class="p">,</span><span class="s1">&#39;Ewallet&#39;</span><span class="p">]</span>
<span class="n">c</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;g&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">method</span><span class="p">,</span><span class="n">colors</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="n">payment</span><span class="p">,</span><span class="n">explode</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.03</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">autopct</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%1.1f%%</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Favorite Method of Payment for Normal&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/bayes_theorem_107_0.png" src="_images/bayes_theorem_107_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">method</span><span class="o">=</span><span class="n">supermarket_df</span><span class="p">[</span><span class="n">supermarket_df</span><span class="p">[</span><span class="s1">&#39;Customer type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;Member&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Payment&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()[</span><span class="s1">&#39;Customer type&#39;</span><span class="p">]</span>
<span class="n">method</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Payment
Cash           168
Credit card    172
Ewallet        161
Name: Customer type, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">payment</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Cash&#39;</span><span class="p">,</span><span class="s1">&#39;Credit card&#39;</span><span class="p">,</span><span class="s1">&#39;Ewallet&#39;</span><span class="p">]</span>
<span class="n">c</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;g&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">method</span><span class="p">,</span><span class="n">colors</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="n">payment</span><span class="p">,</span><span class="n">startangle</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span><span class="n">explode</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.03</span><span class="p">],</span><span class="n">autopct</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%1.1f%%</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Favorite Method of Payment for Normal Clients&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/bayes_theorem_109_0.png" src="_images/bayes_theorem_109_0.png" />
</div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">Q6:</span> <span class="pre">¿A</span> <span class="pre">qué</span> <span class="pre">hora</span> <span class="pre">debemos</span> <span class="pre">mostrar</span> <span class="pre">un</span> <span class="pre">anuncio</span> <span class="pre">para</span> <span class="pre">maximizar</span> <span class="pre">los</span> <span class="pre">ingresos?</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sales_byhour</span><span class="o">=</span><span class="n">supermarket_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;hour&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">sales_byhour</span><span class="o">=</span><span class="n">sales_byhour</span><span class="p">[[</span><span class="s1">&#39;hour&#39;</span><span class="p">,</span> <span class="s1">&#39;Total&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">sales_byhour</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>hour</th>
      <th>Total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10</td>
      <td>31421.4810</td>
    </tr>
    <tr>
      <th>1</th>
      <td>11</td>
      <td>30377.3295</td>
    </tr>
    <tr>
      <th>2</th>
      <td>12</td>
      <td>26065.8825</td>
    </tr>
    <tr>
      <th>3</th>
      <td>13</td>
      <td>34723.2270</td>
    </tr>
    <tr>
      <th>4</th>
      <td>14</td>
      <td>30828.3990</td>
    </tr>
    <tr>
      <th>5</th>
      <td>15</td>
      <td>31179.5085</td>
    </tr>
    <tr>
      <th>6</th>
      <td>16</td>
      <td>25226.3235</td>
    </tr>
    <tr>
      <th>7</th>
      <td>17</td>
      <td>24445.2180</td>
    </tr>
    <tr>
      <th>8</th>
      <td>18</td>
      <td>26030.3400</td>
    </tr>
    <tr>
      <th>9</th>
      <td>19</td>
      <td>39699.5130</td>
    </tr>
    <tr>
      <th>10</th>
      <td>20</td>
      <td>22969.5270</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sales_byhour</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="n">sales_byhour</span><span class="o">.</span><span class="n">Total</span><span class="p">,</span><span class="s1">&#39;o--b&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Hour&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">sales_byhour</span><span class="o">.</span><span class="n">hour</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Sales&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Best Time to Display Advertisement&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;time&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/bayes_theorem_112_0.png" src="_images/bayes_theorem_112_0.png" />
</div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">Inferencias</span></code></strong></p>
<ul class="simple">
<li><p>Hemos sacado muchas conclusiones del <code class="docutils literal notranslate"><span class="pre">dataframe</span></code>. A continuación resumimos algunas de ellas:</p>
<ul>
<li><p>La sucursal C que está en Naypyitaw tiene el mayor número de transacciones y ventas.</p></li>
<li><p>El mes de febrero es el que tiene el menor número de ventas y el de enero es el que tiene más ventas.</p></li>
<li><p>La cantidad de productos está bien distribuida.</p></li>
<li><p>La categoría de alimentos y bebidas es la que produce la mayor cantidad de ventas.</p></li>
<li><p>Los hombres compran más productos en 3 categorías : Electrónica, salud y belleza, hogar y estilo de vida.</p></li>
<li><p>Las mujeres compran más productos en 3 categorías: Moda, Alimentación y bebidas, y Viajes.</p></li>
<li><p>404 personas de cada 1000 compran más que el precio medio. La categoría de deportes y viajes es la que tiene más (75)personas que compran más que el precio medio.</p></li>
<li><p>El efectivo es el método de pago preferido por los clientes. El socio utilizó una tarjeta de crédito y dinero en efectivo para completar la transacción. El cliente normal prefiere utilizar Ewallet y efectivo.</p></li>
<li><p>La hora preferida para mostrar la publicidad es antes de las 13h y las 19h</p></li>
</ul>
</li>
</ul>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="intro.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Data Challenge: Teorema de Bayes</p>
        </div>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Departamento de Matemáticas y Estadística<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>